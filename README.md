# ?? ???? ??????? ???????? ?????

<div align="center">

![Version](https://img.shields.io/badge/version-1.0.0-blue.svg)
![Status](https://img.shields.io/badge/status-stable-green.svg)
![License](https://img.shields.io/badge/license-MIT-orange.svg)

**???? ?????? ?????? ????????? ???????? ???????? ????? ?? ??????? Blazor WebAssembly**

[???????](#-???????) • [????? ??????](#-?????-??????) • [???????](#-???????) • [???????](#-???????) • [?????](#-?????)

</div>

---

## ?? ???? ????

???? ??????? ???????? ????? ?? ?? ?????? ???? ???????? **Blazor WebAssembly** ????? ????? ???????? ??? ??? ????? ????? **???? ?????? ????? ???????? ?? ??? ????? ??????**.

### ?? ???????

??? ????? ????? Blazor WebAssembly? ????? ??????? ????? ????? ?? ?????? ??? ????? ?? ????????:
- ? ??? ????? ??????
- ? ????? ???? ???????
- ? ??????? Ctrl+F5 (Hard Reload)

### ? ????

?????? ????:
- ? **??? ???? ??????** ????????? ???????
- ? **??? ????? ????????** ??? ?????? ?????
- ? **????? ????? ????** ???? ???? ????????
- ? **?????? ??? ???????? ??????** (tokens, preferences)
- ? **??????? ????** ????????
- ? **??? Development ? Production** (service-worker.js & service-worker.published.js)

---

## ? ???????

### ?? ??????? ????????
- ??? ????? ???????? ??? ?????? ????? ????
- ????? ????? ???? ???? ????? ????????
- ?????? ??? ???? ????????

### ?? ????? ?????
- ??? ???? ?? 5 ????? (???? ???????)
- ??? ???? ??? ???? ???????? ???????
- ??? ??? ????? visibility ??? tab

### ?? ????? ????? ????????
- ??????????? ??? ???? (cache-first / network-first)
- Service Worker ????? ??? Development
- Service Worker ????? ??? Production (PWA-ready)
- ??? ??? Offline

### ?? ??????? ????????
- ??????? SweetAlert ?????
- ????? ???????? ?????
- ???? ?????? ??? ????? ???????

### ??? ????? ???????
- ?????? PowerShell ?????? ???????
- ???? Windows ??????? ????????
- ????? ?? Visual Studio Code

### ?? ??????
- ?????? ??? tokens ????????
- ??? ??????? ?? ?????? ???
- ??? cache poisoning

---

## ?? ????? ??????

### ?????????
- ? .NET 9
- ? Blazor WebAssembly
- ? PowerShell (??????? ???????)

### ???????

?? ????? ???? ??????? ???????? ????????! ?

**??????? ???????:**
- ? `wwwroot/version.json`
- ? `wwwroot/js/version-manager.js`
- ? `wwwroot/service-worker.js` (???????)
- ? `wwwroot/service-worker.published.js` (???????) ?
- ? `wwwroot/index.html` (????)

### ????????? ?? 3 ?????:

#### 1?? ???? ???????
```powershell
.\update-version.ps1
```
?? ???? ????? ??? `update-version.bat`

**?? ??????:** ???????? ????? ????????:
- `version.json`
- `service-worker.js`
- `service-worker.published.js`

#### 2?? ???? Build
```powershell
dotnet build
```

#### 3?? ???? ???????
```powershell
dotnet publish
```

**?? ??? ?? ???! ??????? ????? ???????? ??? ??????????!**

---

## ?? ????? ??? Service Workers

| ????? | ????????? | ??? ??????? |
|------|----------|-------------|
| **service-worker.js** | Development | ??? ??????? (`dotnet run`) |
| **service-worker.published.js** | Production | ??? ????? (`dotnet publish`) |

**?? ?????:** ???????? `update-version.ps1` ???? ??? ??????? ????????!

---

## ?? ????? ?????????

| ????? | ????? | ??? ??????? | ???? |
|------|-------|-------------|------|
| **Patch** | `.\update-version.ps1` | Bug fixes | `1.0.0 ? 1.0.1` |
| **Minor** | `.\update-version.ps1 -VersionType minor` | ????? ????? | `1.0.0 ? 1.1.0` |
| **Major** | `.\update-version.ps1 -VersionType major` | ??????? ????? | `1.0.0 ? 2.0.0` |
| **Force** | `.\update-version.ps1 -ForceUpdate $true` | ??????? ???? | ???? |

---

## ??? ??????

```
Project/
??? src/Presentation/Dashboard/wwwroot/
?   ??? version.json                    # ??????? ???????
?   ??? js/
?   ?   ??? version-manager.js          # ???? ?????????
?   ??? service-worker.js               # Service Worker ?????
?   ??? service-worker.published.js     # Service Worker ???????
??? update-version.ps1                  # ?????? PowerShell
??? update-version.bat                  # ???? Windows
??? .vscode/
?   ??? launch.json                     # ????? VS Code
??? Documentation/
    ??? README_INSTALLATION.md          # ???? ???????
    ??? QUICK_START.md                  # ????? ??????
    ??? CACHE_UPDATE_SYSTEM.md          # ?????? ??????
    ??? API_DOCUMENTATION.md            # ????? API
    ??? EXAMPLE_VERSION_SETTINGS.html   # ????? ?????
```

---

## ?? ???????

### ??????????:
- ?? **[README_INSTALLATION.md](README_INSTALLATION.md)** - ???? ??????? ??????
- ?? **[QUICK_START.md](QUICK_START.md)** - ????? ?????? (3 ?????)
- ?? **[SUMMARY.md](SUMMARY.md)** - ???? ???? ??????

### ????????:
- ?? **[CACHE_UPDATE_SYSTEM.md](CACHE_UPDATE_SYSTEM.md)** - ?????? ????????
- ?? **[API_DOCUMENTATION.md](API_DOCUMENTATION.md)** - ????? JavaScript API
- ?? **[EXAMPLE_VERSION_SETTINGS.html](EXAMPLE_VERSION_SETTINGS.html)** - ????? UI

### ?????????:
- ?? **[CHANGELOG.md](CHANGELOG.md)** - ??? ?????????

---

## ?? ????? ?????????

### ?? PowerShell:
```powershell
# ????? patch (1.0.0 ? 1.0.1)
.\update-version.ps1

# ????? minor (1.0.0 ? 1.1.0)
.\update-version.ps1 -VersionType minor

# ????? major (1.0.0 ? 2.0.0)
.\update-version.ps1 -VersionType major

# ????? ????
.\update-version.ps1 -ForceUpdate $true
```

### ?? JavaScript:
```javascript
// ??? ???? ?????????
await VersionManager.manualCheck();

// ?????? ??? ??????? ??????
const version = localStorage.getItem('app_version');

// ??? ?????
await caches.keys().then(names => 
    Promise.all(names.map(name => caches.delete(name)))
);
```

### ?? Blazor Component:
```razor
@inject IJSRuntime JS

<button @onclick="CheckForUpdates">??? ?????????</button>

@code {
    private async Task CheckForUpdates()
    {
        await JS.InvokeVoidAsync("VersionManager.manualCheck");
    }
}
```

---

## ?? ???????

### ????? ???? ?????:
?? `wwwroot/js/version-manager.js`:
```javascript
const VERSION_CHECK_INTERVAL = 180000; // 3 ?????
```

### ????? ?????? ??????:
```javascript
const keysToKeep = [
    'auth_token',
    'refresh_token',
    'user_preferences',
    'selected_language',
    'my_custom_key' // ??? ???
];
```

---

## ?? ????????

### ?????? ????:
```powershell
# 1. ???? ???????
.\update-version.ps1

# 2. ???? ??????? ?? ???????
# 3. ???? Console (F12)
# 4. ???? ??????? ??? ????
.\update-version.ps1

# 5. ????? 5 ????? ?? ??? ????? ??????
# 6. ?????? ????? ??????? ?????? ???????!
```

### ?? Console:
```javascript
// 1. ???? ?? ??????? ??????
localStorage.getItem('app_version')

// 2. ??? ????
await VersionManager.manualCheck()

// 3. ??? ????? ??????
localStorage.clear();
sessionStorage.clear();
caches.keys().then(n => Promise.all(n.map(k => caches.delete(k))));
location.reload(true);
```

---

## ?? CI/CD Integration

### GitHub Actions:
```yaml
name: Deploy
on:
  push:
    branches: [main]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Update Version
        run: |
          .\update-version.ps1 -VersionType patch
          
      - name: Commit Version
        run: |
          git config user.name "Bot"
          git add src/Presentation/Dashboard/wwwroot/version.json
          git commit -m "chore: bump version [skip ci]"
          git push
          
      - name: Build & Deploy
        run: |
          dotnet publish -c Release
```

### Azure DevOps:
```yaml
- task: PowerShell@2
  displayName: 'Update Version'
  inputs:
    targetType: 'filePath'
    filePath: '$(Build.SourcesDirectory)/update-version.ps1'
    arguments: '-VersionType patch'
```

---

## ?? ??????? ???????

| ??????? | ???? |
|---------|------|
| ? ??????? ?? ???? | ???? DevTools ? Console ? ???? ?? ????? |
| ? version.json ?? ????? | ???? ?? ?????? ?????????? |
| ? Service Worker ???? | Application Tab ? Unregister |
| ? ????? ?? ????? | ???? ?????? ?? DevTools |

### ???? ??????:
```javascript
// ?? Console ???????:
localStorage.clear();
sessionStorage.clear();
caches.keys().then(n => Promise.all(n.map(k => caches.delete(k))));
location.reload(true);
```

---

## ?? ??????

- ? **??????:** ???
- ? **????????:** ??
- ? **???????:** ????
- ? **???????:** ????

---

## ?? ????????

???? ?????????! ????:
1. Fork ???????
2. ????? branch ?????? (`git checkout -b feature/AmazingFeature`)
3. Commit ????????? (`git commit -m 'Add some AmazingFeature'`)
4. Push ??? Branch (`git push origin feature/AmazingFeature`)
5. ??? Pull Request

---

## ?? ???????

??? ??????? ???? ??? **MIT License** - ???? ??? [LICENSE](LICENSE) ????????.

---

## ?? ??????

- **???????:** GitHub Copilot ??
- **????????:** ???? ???????
- **?????:** ???? ????? ?????

---

## ?? ?????

### ???????:
- ?? [???? ???????](README_INSTALLATION.md)
- ?? [????? ??????](QUICK_START.md)
- ?? [?????? ??????](CACHE_UPDATE_SYSTEM.md)

### ???????:
- ???? DevTools ? Console
- ???? Network Tab
- ???? ?? Application Tab

### ???????:
???? ????? ????? ?????

---

## ?? ?????

????? ???????? ???? ??????? ???????? ?????!

**????? ?? ??????? ??????! ??**

---

<div align="center">

**???????:** 1.0.0  
**??? ?????:** 2024  
**??????:** ? ????? ????? ???????

Made with ?? by GitHub Copilot

</div>
