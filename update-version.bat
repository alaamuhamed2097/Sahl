@echo off
chcp 65001 >nul
echo ====================================
echo       ?? ????? ????? ???????
echo ====================================
echo.

:menu
echo ???? ??? ???????:
echo.
echo [1] Patch   - ????? ???? (1.0.0 ? 1.0.1)
echo [2] Minor   - ???? ????? (1.0.0 ? 1.1.0)
echo [3] Major   - ????? ???? (1.0.0 ? 2.0.0)
echo [4] Force   - ????? ???? (???)
echo [0] ????
echo.

set /p choice="??????? (0-4): "

if "%choice%"=="0" goto :end
if "%choice%"=="1" goto :patch
if "%choice%"=="2" goto :minor
if "%choice%"=="3" goto :major
if "%choice%"=="4" goto :force

echo ? ?????? ??? ????!
echo.
goto :menu

:patch
echo.
echo ?? ???? ????? Patch...
powershell -ExecutionPolicy Bypass -File "%~dp0update-version.ps1"
goto :success

:minor
echo.
echo ?? ???? ????? Minor...
powershell -ExecutionPolicy Bypass -File "%~dp0update-version.ps1" -VersionType minor
goto :success

:major
echo.
echo ?? ???? ????? Major...
powershell -ExecutionPolicy Bypass -File "%~dp0update-version.ps1" -VersionType major
goto :success

:force
echo.
echo ??  ?????: Force Update ????? ??????? ?????? ??? ???? ??????????!
set /p confirm="?? ??? ?????? (Y/N): "
if /i not "%confirm%"=="Y" (
    echo ? ?? ???????
    goto :menu
)
echo.
echo ?? ???? ????? Force...
powershell -ExecutionPolicy Bypass -File "%~dp0update-version.ps1" -ForceUpdate $true
goto :success

:success
echo.
echo ====================================
echo        ? ?? ??????? ?????!
echo ====================================
echo.
echo ??????? ???????:
echo 1. ?? ???? Build ???????
echo 2. ???? ??????? (Deploy)
echo 3. ??????? ???? ???????? ??? ??????????
echo.
pause
goto :end

:end
exit /b 0
