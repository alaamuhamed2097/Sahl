"use strict";function renderUserRegistrationChart(n){return window.statisticsCharts.ensureHighcharts().then(()=>renderUserRegistrationChartInternal(n)).catch(n=>{console.error("Failed to load Highcharts for user registration chart:",n),showChartError("user-registration-chart","Failed to load chart library")})}function renderUserRegistrationChartInternal(n){try{if(!n||!Array.isArray(n)||n.length===0){console.warn("No data provided for user registration chart");showChartEmpty("user-registration-chart","No registration data available");return}const i=n.map(n=>[new Date(n.date).getTime(),parseInt(n.count)||0]),t=Highcharts.charts.find(n=>n&&n.container&&n.container.id==="user-registration-chart");t&&t.destroy();Highcharts.chart("user-registration-chart",{chart:{type:"areaspline",backgroundColor:"transparent",height:300},title:{text:null},xAxis:{type:"datetime",dateTimeLabelFormats:{day:"%e %b",week:"%e %b",month:"%b '%y"},gridLineWidth:1,gridLineColor:"#f0f0f0"},yAxis:{title:{text:"New Users"},min:0,gridLineColor:"#f0f0f0"},tooltip:{shared:!0,formatter:function(){return"<b>"+Highcharts.dateFormat("%e %B %Y",this.x)+"<\/b><br/>New Users: <b>"+this.y+"<\/b>"}},legend:{enabled:!1},plotOptions:{areaspline:{fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,window.statisticsCharts.rgba(window.statisticsCharts.colors.primary,.6)],[1,window.statisticsCharts.rgba(window.statisticsCharts.colors.primary,.1)]]},lineWidth:3,lineColor:window.statisticsCharts.colors.primary,marker:{enabled:!0,radius:4,fillColor:"#fff",lineColor:window.statisticsCharts.colors.primary,lineWidth:2,states:{hover:{radius:6}}},states:{hover:{lineWidth:3}}}},series:[{name:"User Registrations",data:i,color:window.statisticsCharts.colors.primary}],credits:{enabled:!1},responsive:{rules:[{condition:{maxWidth:500},chartOptions:{chart:{height:250}}}]}});console.log("User registration chart rendered successfully")}catch(t){console.error("Error rendering user registration chart:",t);showChartError("user-registration-chart","Error loading chart data")}}function renderRevenueTrendChart(n){return window.statisticsCharts.ensureHighcharts().then(()=>renderRevenueTrendChartInternal(n)).catch(n=>{console.error("Failed to load Highcharts for revenue trend chart:",n),showChartError("revenue-trend-chart","Failed to load chart library")})}function renderRevenueTrendChartInternal(n){try{if(!n||!Array.isArray(n)||n.length===0){console.warn("No data provided for revenue trend chart");showChartEmpty("revenue-trend-chart","No revenue data available");return}const i=n.map(n=>[new Date(n.date).getTime(),parseFloat(n.amount)||0]),t=Highcharts.charts.find(n=>n&&n.container&&n.container.id==="revenue-trend-chart");t&&t.destroy();Highcharts.chart("revenue-trend-chart",{chart:{type:"spline",backgroundColor:"transparent",height:300},title:{text:null},xAxis:{type:"datetime",dateTimeLabelFormats:{day:"%e %b",week:"%e %b",month:"%b '%y"},gridLineWidth:1,gridLineColor:"#f0f0f0"},yAxis:{title:{text:"Revenue ($)"},min:0,gridLineColor:"#f0f0f0",labels:{formatter:function(){return"$"+Highcharts.numberFormat(this.value,0)}}},tooltip:{shared:!0,formatter:function(){return"<b>"+Highcharts.dateFormat("%e %B %Y",this.x)+"<\/b><br/>Revenue: <b>$"+Highcharts.numberFormat(this.y,2)+"<\/b>"}},legend:{enabled:!1},plotOptions:{spline:{lineWidth:3,lineColor:window.statisticsCharts.colors.success,marker:{enabled:!0,radius:4,fillColor:"#fff",lineColor:window.statisticsCharts.colors.success,lineWidth:2,states:{hover:{radius:6}}}}},series:[{name:"Revenue",data:i,color:window.statisticsCharts.colors.success}],credits:{enabled:!1},responsive:{rules:[{condition:{maxWidth:500},chartOptions:{chart:{height:250}}}]}});console.log("Revenue trend chart rendered successfully")}catch(t){console.error("Error rendering revenue trend chart:",t);showChartError("revenue-trend-chart","Error loading chart data")}}function renderUserStatusChart(n){return window.statisticsCharts.ensureHighcharts().then(()=>renderUserStatusChartInternal(n)).catch(n=>{console.error("Failed to load Highcharts for user status chart:",n),showChartError("user-status-chart","Failed to load chart library")})}function renderUserStatusChartInternal(n){try{if(!n){console.warn("No data provided for user status chart");showChartEmpty("user-status-chart","No user status data available");return}const i=[{name:"Active Users",y:n.activeUsers||0,color:window.statisticsCharts.colors.success},{name:"Pending Users",y:n.pendingUsers||0,color:window.statisticsCharts.colors.warning},{name:"Banned Users",y:n.bannedUsers||0,color:window.statisticsCharts.colors.danger},{name:"Admins",y:n.totalAdmins||0,color:window.statisticsCharts.colors.info}],t=Highcharts.charts.find(n=>n&&n.container&&n.container.id==="user-status-chart");t&&t.destroy();Highcharts.chart("user-status-chart",{chart:{type:"pie",backgroundColor:"transparent",height:300},title:{text:null},tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.1f}%<\/b><br/>Count: <b>{point.y}<\/b>"},accessibility:{point:{valueSuffix:"%"}},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.name}<\/b>: {point.percentage:.1f} %"},showInLegend:!0}},series:[{name:"Users",colorByPoint:!0,data:i}],credits:{enabled:!1}});console.log("User status chart rendered successfully")}catch(t){console.error("Error rendering user status chart:",t);showChartError("user-status-chart","Error loading chart data")}}function renderOrderStatusChart(n){return window.statisticsCharts.ensureHighcharts().then(()=>renderOrderStatusChartInternal(n)).catch(n=>{console.error("Failed to load Highcharts for order status chart:",n),showChartError("order-status-chart","Failed to load chart library")})}function renderOrderStatusChartInternal(n){try{if(!n){console.warn("No data provided for order status chart");showChartEmpty("order-status-chart","No order status data available");return}const i=[{name:"Completed Orders",y:n.completedOrders||0,color:window.statisticsCharts.colors.success},{name:"Pending Orders",y:n.pendingOrders||0,color:window.statisticsCharts.colors.warning}],t=Highcharts.charts.find(n=>n&&n.container&&n.container.id==="order-status-chart");t&&t.destroy();Highcharts.chart("order-status-chart",{chart:{type:"pie",backgroundColor:"transparent",height:300},title:{text:null},tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.1f}%<\/b><br/>Count: <b>{point.y}<\/b>"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.name}<\/b>: {point.y}"},showInLegend:!0,innerSize:"50%"}},series:[{name:"Orders",colorByPoint:!0,data:i}],credits:{enabled:!1}});console.log("Order status chart rendered successfully")}catch(t){console.error("Error rendering order status chart:",t);showChartError("order-status-chart","Error loading chart data")}}function showChartEmpty(n,t){const i=document.getElementById(n);i&&(i.innerHTML=`<div class="text-center text-muted p-4">
                <i class="fas fa-chart-line fa-3x mb-3"></i>
                <p>${t}</p>
            </div>`)}function showChartError(n,t){const i=document.getElementById(n);i&&(i.innerHTML=`<div class="text-center text-danger p-4">
                <i class="fas fa-exclamation-triangle fa-2x mb-3"></i>
                <p>${t}</p>
            </div>`)}window.statisticsCharts={colors:{primary:"#19BCBF",secondary:"#463699",success:"#13bd8a",warning:"#FF9764",danger:"#FF425C",info:"#2DCEE3"},initialized:!1,rgba:function(n,t){try{if(typeof Highcharts!="undefined"){if(typeof Highcharts.color=="function")return Highcharts.color(n).setOpacity(t).get("rgba");if(typeof Highcharts.Color=="function")return Highcharts.Color(n).setOpacity(t).get("rgba")}}catch(i){console.warn("Highcharts color processing failed, falling back to hex:",i)}return n},init:function(){if(!this.initialized)return typeof Highcharts=="undefined"?(console.warn("Highcharts library not found. Please include Highcharts library."),!1):(this.initialized=!0,console.log("Statistics charts initialized"),!0)},ensureHighcharts:function(){return typeof Highcharts!="undefined"?Promise.resolve(this.init()):window.ScriptLoader&&window.ScriptLoader.loadHighcharts?window.ScriptLoader.loadHighcharts().then(()=>this.init()).catch(n=>{console.error("Failed to load Highcharts for admin charts:",n);throw n;}):Promise.reject(new Error("Highcharts not available and ScriptLoader not found"))}};window.disposeAdminCharts=function(){try{return["user-registration-chart","revenue-trend-chart","user-status-chart","order-status-chart"].forEach(n=>{if(typeof Highcharts!="undefined"&&Highcharts.charts){const t=Highcharts.charts.find(t=>t&&t.container&&t.container.id===n);t&&(t.destroy(),console.log(`Admin chart ${n} destroyed`))}}),console.log("Admin charts disposed successfully"),!0}catch(n){return console.error("Error disposing admin charts:",n),!1}};window.renderUserRegistrationChart=renderUserRegistrationChart;window.renderRevenueTrendChart=renderRevenueTrendChart;window.renderUserStatusChart=renderUserStatusChart;window.renderOrderStatusChart=renderOrderStatusChart;