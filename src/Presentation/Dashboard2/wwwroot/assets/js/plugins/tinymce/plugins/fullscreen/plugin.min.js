(function(n){"use strict";function yo(){or.add("fullscreen",function(n){var t=c(null);return n.settings.inline?st.get(t):(lo.register(n,t),vo.register(n,t),n.addShortcut("Meta+Shift+F","","mceFullScreen"),st.get(t))})}var c=function(n){var t=n,i=function(){return t},r=function(n){t=n},u=function(){return c(i())};return{get:i,set:r,clone:u}},or=tinymce.util.Tools.resolve("tinymce.PluginManager"),sr=function(n){return{isFullscreen:function(){return n.get()!==null}}},st={get:sr},v=function(){},hr=function(n,t){return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return n(t.apply(null,r))}},t=function(n){return function(){return n}},o=t(!1),d=t(!0),y=function(){return g},g=function(){var n=function(n){return n.isNone()},i=function(n){return n()},r=function(n){return n},u={fold:function(n){return n()},is:o,isSome:o,isNone:d,getOr:r,getOrThunk:i,getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.");},getOrNull:t(null),getOrUndefined:t(undefined),or:r,orThunk:i,map:y,each:v,bind:y,exists:o,forall:d,filter:y,equals:n,equals_:n,toArray:function(){return[]},toString:t("none()")};return Object.freeze&&Object.freeze(u),u}(),nt=function(n){var i=t(n),f=function(){return u},r=function(t){return t(n)},u={fold:function(t,i){return i(n)},is:function(t){return n===t},isSome:d,isNone:o,getOr:i,getOrThunk:i,getOrDie:i,getOrNull:i,getOrUndefined:i,or:f,orThunk:f,map:function(t){return nt(t(n))},each:function(t){t(n)},bind:r,exists:r,forall:r,filter:function(t){return t(n)?u:g},toArray:function(){return[n]},toString:function(){return"some("+n+")"},equals:function(t){return t.is(n)},equals_:function(t,i){return t.fold(o,function(t){return i(n,t)})}};return u},cr=function(n){return n===null||n===undefined?g:nt(n)},r={some:nt,none:y,from:cr},lr=function(n){var t=c(r.none()),i=function(){t.get().each(n)},u=function(){i();t.set(r.none())},f=function(n){i();t.set(r.some(n))},e=function(){return t.get().isSome()};return{clear:u,isSet:e,set:f}},ht=function(){return lr(function(n){n.unbind()})},ar=function(){var n=c(r.none()),t=function(){n.set(r.none())},i=function(t){n.set(r.some(t))},u=function(t){n.get().each(t)},f=function(){return n.get().isSome()};return{clear:t,set:i,isSet:f,on:u}},vr=function(n){if(n===null)return"null";var t=typeof n;return t==="object"&&(Array.prototype.isPrototypeOf(n)||n.constructor&&n.constructor.name==="Array")?"array":t==="object"&&(String.prototype.isPrototypeOf(n)||n.constructor&&n.constructor.name==="String")?"string":t},l=function(n){return function(t){return vr(t)===n}},ct=l("string"),yr=l("array"),pr=l("boolean"),tt=l("function"),wr=l("number"),br=Array.prototype.slice,kr=Array.prototype.push,it=function(n,t){for(var f,r=n.length,u=new Array(r),i=0;i<r;i++)f=n[i],u[i]=t(f,i);return u},p=function(n,t){for(var u,i=0,r=n.length;i<r;i++)u=n[i],t(u,i)},rt=function(n,t){for(var r,u=[],i=0,f=n.length;i<f;i++)r=n[i],t(r,i)&&u.push(r);return u},dr=function(n,t){for(var u,i=0,f=n.length;i<f;i++)if(u=n[i],t(u,i))return r.some(u);return r.none()},gr=function(n){for(var i=[],t=0,r=n.length;t<r;++t){if(!yr(n[t]))throw new Error("Arr.flatten item "+t+" was not an array, input: "+n);kr.apply(i,n[t])}return i},nu=function(n,t){return gr(it(n,t))},po=tt(Array.from)?Array.from:function(n){return br.call(n)},tu=Object.keys,iu=function(n,t){for(var r,f,u=tu(n),i=0,e=u.length;i<e;i++)r=u[i],f=n[r],t(f,r)},i=function(n,t){return n.indexOf(t)!==-1},lt=function(n){return n.style!==undefined&&tt(n.style.getPropertyValue)},ru=function(t,i){var u=i||n.document,r=u.createElement("div");if(r.innerHTML=t,!r.hasChildNodes()||r.childNodes.length>1){n.console.error("HTML does not have a single root node",t);throw new Error("HTML must have a single root node");}return a(r.childNodes[0])},uu=function(t,i){var r=i||n.document,u=r.createElement(t);return a(u)},fu=function(t,i){var r=i||n.document,u=r.createTextNode(t);return a(u)},a=function(n){if(n===null||n===undefined)throw new Error("Node cannot be null or undefined");return{dom:t(n)}},eu=function(n,t,i){var u=n.dom();return r.from(u.elementFromPoint(t,i)).map(a)},f={fromHtml:ru,fromTag:uu,fromText:fu,fromDom:a,fromPoint:eu},wo=n.Node.ATTRIBUTE_NODE,bo=n.Node.CDATA_SECTION_NODE,ko=n.Node.COMMENT_NODE,ou=n.Node.DOCUMENT_NODE,go=n.Node.DOCUMENT_TYPE_NODE,ns=n.Node.DOCUMENT_FRAGMENT_NODE,su=n.Node.ELEMENT_NODE,hu=n.Node.TEXT_NODE,ts=n.Node.PROCESSING_INSTRUCTION_NODE,is=n.Node.ENTITY_REFERENCE_NODE,rs=n.Node.ENTITY_NODE,us=n.Node.NOTATION_NODE,fs=typeof n.window!="undefined"?n.window:Function("return this;")(),cu=function(n){return n.dom().nodeType},lu=function(n){return function(t){return cu(t)===n}},au=lu(hu),vu=function(n){var t=au(n)?n.dom().parentNode:n.dom();return t!==undefined&&t!==null&&t.ownerDocument.body.contains(t)},yu=function(t,i,r){if(ct(r)||pr(r)||wr(r))t.setAttribute(i,r+"");else{n.console.error("Invalid call to Attr.set. Key ",i,":: Value ",r,":: Element ",t);throw new Error("Attribute value was not simple");}},pu=function(n,t,i){yu(n.dom(),t,i)},at=function(n,t){var i=n.dom().getAttribute(t);return i===null?undefined:i},vt=function(n,t){n.dom().removeAttribute(t)},wu=function(t,i,r){if(!ct(r)){n.console.error("Invalid call to CSS.set. Property ",i,":: Value ",r,":: Element ",t);throw new Error("CSS value must be a string: "+r);}lt(t)&&t.style.setProperty(i,r)},ut=function(n,t){var i=n.dom();iu(t,function(n,t){wu(i,t,n)})},bu=function(t,i){var r=t.dom(),e=n.window.getComputedStyle(r),u=e.getPropertyValue(i),f=u===""&&!vu(t)?ku(r,i):u;return f===null?undefined:f},ku=function(n,t){return lt(n)?n.style.getPropertyValue(t):""},du=function(n,i,r,u,f,e,o){return{target:t(n),x:t(i),y:t(r),stop:u,prevent:f,kill:e,raw:t(o)}},gu=function(n){var r=f.fromDom(n.target),t=function(){n.stopPropagation()},i=function(){n.preventDefault()},u=hr(i,t);return du(r,n.clientX,n.clientY,t,i,u,n)},nf=function(n,t){for(var r,i=0;i<n.length;i++)if(r=n[i],r.test(t))return r;return undefined},tf=function(n,t){var r=nf(n,t),i;return r?(i=function(n){return Number(t.replace(r,"$"+n))},ft(i(1),i(2))):{major:0,minor:0}},rf=function(n,t){var i=String(t).toLowerCase();return n.length===0?yt():tf(n,i)},yt=function(){return ft(0,0)},ft=function(n,t){return{major:n,minor:t}},w={nu:ft,detect:rf,unknown:yt},pt="Edge",wt="Chrome",bt="IE",kt="Opera",dt="Firefox",gt="Safari",s=function(n,t){return function(){return t===n}},uf=function(){return ni({current:undefined,version:w.unknown()})},ni=function(n){var t=n.current,i=n.version;return{current:t,version:i,isEdge:s(pt,t),isChrome:s(wt,t),isIE:s(bt,t),isOpera:s(kt,t),isFirefox:s(dt,t),isSafari:s(gt,t)}},ti={unknown:uf,nu:ni,edge:t(pt),chrome:t(wt),ie:t(bt),opera:t(kt),firefox:t(dt),safari:t(gt)},ii="Windows",ri="iOS",ui="Android",fi="Linux",ei="OSX",oi="Solaris",si="FreeBSD",hi="ChromeOS",e=function(n,t){return function(){return t===n}},ff=function(){return ci({current:undefined,version:w.unknown()})},ci=function(n){var t=n.current,i=n.version;return{current:t,version:i,isWindows:e(ii,t),isiOS:e(ri,t),isAndroid:e(ui,t),isOSX:e(ei,t),isLinux:e(fi,t),isSolaris:e(oi,t),isFreeBSD:e(si,t),isChromeOS:e(hi,t)}},li={unknown:ff,nu:ci,windows:t(ii),ios:t(ri),android:t(ui),linux:t(fi),osx:t(ei),solaris:t(oi),freebsd:t(si),chromeos:t(hi)},ef=function(n,i,r,u){var f=n.isiOS()&&/ipad/i.test(r)===!0,e=n.isiOS()&&!f,o=n.isiOS()||n.isAndroid(),l=o||u("(pointer:coarse)"),s=f||!e&&o&&u("(min-device-width:768px)"),h=e||o&&!s,c=i.isSafari()&&n.isiOS()&&/safari/i.test(r)===!1,a=!h&&!s&&!c;return{isiPad:t(f),isiPhone:t(e),isTablet:t(s),isPhone:t(h),isTouch:t(l),isAndroid:n.isAndroid,isiOS:n.isiOS,isWebView:t(c),isDesktop:t(a)}},ai=function(n,t){var i=String(t).toLowerCase();return dr(n,function(n){return n.search(i)})},sf=function(n,t){return ai(n,t).map(function(n){var i=w.detect(n.versionRegexes,t);return{current:n.name,version:i}})},hf=function(n,t){return ai(n,t).map(function(n){var i=w.detect(n.versionRegexes,t);return{current:n.name,version:i}})},vi={detectBrowser:sf,detectOs:hf},et=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,u=function(n){return function(t){return i(t,n)}},cf=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(n){return i(n,"edge/")&&i(n,"chrome")&&i(n,"safari")&&i(n,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,et],search:function(n){return i(n,"chrome")&&!i(n,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(n){return i(n,"msie")||i(n,"trident")}},{name:"Opera",versionRegexes:[et,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:u("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:u("firefox")},{name:"Safari",versionRegexes:[et,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(n){return(i(n,"safari")||i(n,"mobile/"))&&i(n,"applewebkit")}}],lf=[{name:"Windows",search:u("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(n){return i(n,"iphone")||i(n,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:u("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:u("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:u("linux"),versionRegexes:[]},{name:"Solaris",search:u("sunos"),versionRegexes:[]},{name:"FreeBSD",search:u("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:u("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],yi={browsers:t(cf),oses:t(lf)},af=function(n,t){var u=yi.browsers(),f=yi.oses(),i=vi.detectBrowser(u,n).fold(ti.unknown,ti.nu),r=vi.detectOs(f,n).fold(li.unknown,li.nu),e=ef(r,i,n,t);return{browser:i,os:r,deviceType:e}},vf={detect:af},yf=function(t){return n.window.matchMedia(t).matches},pf=c(vf.detect(n.navigator.userAgent,yf)),pi=function(){return pf.get()},wf=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return function(){for(var u,i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];if(n.length!==i.length)throw new Error('Wrong number of arguments to struct. Expected "['+n.length+']", got '+i.length+" arguments");return u={},p(n,function(n,r){u[n]=t(i[r])}),u}},wi=function(n,t,i){return(n.compareDocumentPosition(t)&i)!=0},bf=function(t,i){return wi(t,i,n.Node.DOCUMENT_POSITION_PRECEDING)},kf=function(t,i){return wi(t,i,n.Node.DOCUMENT_POSITION_CONTAINED_BY)},df={documentPositionPreceding:bf,documentPositionContainedBy:kf},bi=su,gf=ou,ki=function(n,t){var r=n.dom(),i;if(r.nodeType!==bi)return!1;if(i=r,i.matches!==undefined)return i.matches(t);if(i.msMatchesSelector!==undefined)return i.msMatchesSelector(t);if(i.webkitMatchesSelector!==undefined)return i.webkitMatchesSelector(t);if(i.mozMatchesSelector!==undefined)return i.mozMatchesSelector(t);throw new Error("Browser lacks native selectors");},ne=function(n){return n.nodeType!==bi&&n.nodeType!==gf||n.childElementCount===0},te=function(t,i){var r=i===undefined?n.document:i.dom();return ne(r)?[]:it(r.querySelectorAll(t),f.fromDom)},ie=function(n,t){return n.dom()===t.dom()},re=function(n,t){var i=n.dom(),r=t.dom();return i===r?!1:i.contains(r)},ue=function(n,t){return df.documentPositionContainedBy(n.dom(),t.dom())},fe=pi().browser,es=fe.isIE()?ue:re,ee=function(n){return r.from(n.dom().parentNode).map(f.fromDom)},oe=function(n,t){for(var s=tt(t)?t:o,i=n.dom(),e=[],r,u;i.parentNode!==null&&i.parentNode!==undefined;)if(r=i.parentNode,u=f.fromDom(r),e.push(u),s(u)===!0)break;else i=r;return e},se=function(n){var t=function(t){return rt(t,function(t){return!ie(n,t)})};return ee(n).map(he).map(t).getOr([])},he=function(n){return it(n.dom().childNodes,f.fromDom)},os=wf("element","offset"),di=function(n,i){var r=function(t,r){return di(n+t,i+r)};return{left:t(n),top:t(i),translate:r}},ce=di,ss=pi().browser.isSafari(),le=function(t){var i=t!==undefined?t.dom():n.document,r=i.body.scrollLeft||i.documentElement.scrollLeft,u=i.body.scrollTop||i.documentElement.scrollTop;return ce(r,u)},ot=function(t){var i=t===undefined?n.window:t;return r.from(i.visualViewport)},gi=function(n,i,r,u){return{x:t(n),y:t(i),width:t(r),height:t(u),right:t(n+r),bottom:t(i+u)}},ae=function(t){var r=t===undefined?n.window:t,u=r.document,i=le(f.fromDom(u));return ot(r).fold(function(){var n=r.document.documentElement,t=n.clientWidth,u=n.clientHeight;return gi(i.left(),i.top(),t,u)},function(n){return gi(Math.max(n.pageLeft,i.left()),Math.max(n.pageTop,i.top()),n.width,n.height)})},nr=function(n,t,i){return ot(i).map(function(t){var i=function(n){return gu(n)};return t.addEventListener(n,i),{unbind:function(){return t.removeEventListener(n,i)}}}).getOrThunk(function(){return{unbind:v}})},ve=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),tr=tinymce.util.Tools.resolve("tinymce.Env"),ye=tinymce.util.Tools.resolve("tinymce.util.Delay"),pe=function(n,t){n.fire("FullscreenStateChanged",{state:t})},ir={fireFullscreenStateChanged:pe},we=function(n,t,i){return rt(oe(n,i),t)},be=function(n,t){return rt(se(n),t)},ke=function(n){return te(n)},de=function(n,t,i){return we(n,function(n){return ki(n,t)},i)},ge=function(n,t){return be(n,function(n){return ki(n,t)})},b="data-ephox-mobile-fullscreen-style",no="display:none!important;",rr="position:absolute!important;",ur="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",to="background-color:rgb(255,255,255)!important;",io=tr.os.isAndroid(),ro=function(n){var t=bu(n,"background-color");return t!==undefined&&t!==""?"background-color:"+t+"!important":to},uo=function(n,t,i){var o=function(n){return ge(n,"*:not(.tox-silver-sink)")},r=function(t){return function(i){var r=at(i,"style"),u=r===undefined?"no-styles":r.trim();u!==t&&(pu(i,b,u),ut(i,n.parseStyle(t)))}},u=de(t,"*"),s=nu(u,o),f=ro(i),e;p(s,r(no));p(u,r(rr+ur+f));e=io===!0?"":rr;r(e+ur+f)(t)},fo=function(n){var t=ke("["+b+"]");p(t,function(t){var i=at(t,b);i!=="no-styles"?ut(t,n.parseStyle(i)):vt(t,"style");vt(t,b)})},fr={clobberStyles:uo,restoreStyles:fo},h=ve.DOM,eo=function(){var t=ae(n.window);return{x:t.x(),y:t.y()}},oo=function(t){n.window.scrollTo(t.x,t.y)},k=ot().fold(function(){return{bind:v,unbind:v}},function(t){var i=ar(),r=ht(),u=ht(),f=function(){n.document.body.scrollTop=0;n.document.documentElement.scrollTop=0},e=function(){n.window.requestAnimationFrame(function(){i.on(function(n){return ut(n,{top:t.offsetTop+"px",left:t.offsetLeft+"px",height:t.height+"px",width:t.width+"px"})})})},o=ye.throttle(function(){f();e()},50),s=function(n){i.set(n);o();r.set(nr("resize"));u.set(nr("scroll"))},h=function(){i.on(function(){r.clear();u.clear()});i.clear()};return{bind:s,unbind:h}}),so=function(t,i){var s=n.document.body,c=n.document.documentElement,r,o,l,e,y;o=t.getContainer();var a=f.fromDom(o),u=i.get(),p=f.fromDom(t.getBody()),v=tr.deviceType.isTouch();if(r=o.style,l=t.getContentAreaContainer().firstChild,e=l.style,u)e.width=u.iframeWidth,e.height=u.iframeHeight,r.width=u.containerWidth,r.height=u.containerHeight,r.top=u.containerTop,r.left=u.containerLeft,v&&fr.restoreStyles(t.dom),h.removeClass(s,"tox-fullscreen"),h.removeClass(c,"tox-fullscreen"),h.removeClass(o,"tox-fullscreen"),oo(u.scrollPos),i.set(null),ir.fireFullscreenStateChanged(t,!1),k.unbind(),t.off("remove",k.unbind);else{y={scrollPos:eo(),containerWidth:r.width,containerHeight:r.height,containerTop:r.top,containerLeft:r.left,iframeWidth:e.width,iframeHeight:e.height};v&&fr.clobberStyles(t.dom,a,p);e.width=e.height="100%";r.width=r.height="";h.addClass(s,"tox-fullscreen");h.addClass(c,"tox-fullscreen");h.addClass(o,"tox-fullscreen");k.bind(a);t.on("remove",k.unbind);i.set(y);ir.fireFullscreenStateChanged(t,!0)}},ho={toggleFullscreen:so},co=function(n,t){n.addCommand("mceFullScreen",function(){ho.toggleFullscreen(n,t)})},lo={register:co},er=function(n,t){return function(i){i.setActive(t.get()!==null);var r=function(n){return i.setActive(n.state)};n.on("FullscreenStateChanged",r);return function(){return n.off("FullscreenStateChanged",r)}}},ao=function(n,t){n.ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",shortcut:"Meta+Shift+F",onAction:function(){return n.execCommand("mceFullScreen")},onSetup:er(n,t)});n.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:function(){return n.execCommand("mceFullScreen")},onSetup:er(n,t)})},vo={register:ao};yo()})(window);