window.lazyLoadUtils={observers:new Map,observeLazyComponent:function(n,t){if(!n||!window.IntersectionObserver){setTimeout(()=>{t.invokeMethodAsync("OnVisible")},1e3);return}const i=new IntersectionObserver(r=>{r.forEach(r=>{r.isIntersecting&&(t.invokeMethodAsync("OnVisible"),i.unobserve(r.target),this.observers.delete(n))})},{rootMargin:"50px 0px",threshold:.1});i.observe(n);this.observers.set(n,i)},preloadCriticalResources:function(){["/css/Vendor-statistics-widget.css","/js/Vendor-statistics-charts.min.js"].forEach(n=>{this.preloadResource(n)})},preloadStatisticsResources:function(){["/js/statistics-charts.min.js"].forEach(n=>{this.preloadResource(n)})},preloadResource:function(n){if(n&&!document.querySelector(`link[href="${n}"], script[src="${n}"]`)){const i=n.endsWith(".css"),t=i?document.createElement("link"):document.createElement("script");i?(t.rel="preload",t.as="style",t.href=n,t.onload=function(){this.rel="stylesheet"}):(t.src=n,t.async=!0);document.head.appendChild(t)}},getAutoLoadPreference:function(){try{const n=localStorage.getItem("autoLoadDashboard");return n!=="false"}catch{return!0}},setAutoLoadPreference:function(n){try{localStorage.setItem("autoLoadDashboard",n.toString())}catch{}},measurePerformance:function(n){window.performance&&window.performance.mark&&window.performance.mark(n)},getPerformanceMetrics:function(){if(!window.performance)return null;const n=performance.getEntriesByType("navigation")[0],t=performance.getEntriesByType("paint");return{domContentLoaded:n?n.domContentLoadedEventEnd-n.domContentLoadedEventStart:0,firstPaint:t.find(n=>n.name==="first-paint")?.startTime||0,firstContentfulPaint:t.find(n=>n.name==="first-contentful-paint")?.startTime||0}},cleanup:function(){this.observers.forEach(n=>{n.disconnect()});this.observers.clear()}};window.observeLazyComponent=window.lazyLoadUtils.observeLazyComponent.bind(window.lazyLoadUtils);window.preloadCriticalResources=window.lazyLoadUtils.preloadCriticalResources.bind(window.lazyLoadUtils);window.preloadStatisticsResources=window.lazyLoadUtils.preloadStatisticsResources.bind(window.lazyLoadUtils);window.getAutoLoadPreference=window.lazyLoadUtils.getAutoLoadPreference.bind(window.lazyLoadUtils);window.setAutoLoadPreference=window.lazyLoadUtils.setAutoLoadPreference.bind(window.lazyLoadUtils);window.isHighchartsAvailable=function(){return typeof Highcharts!="undefined"};window.loadHighchartsIfNeeded=async function(){return window.isHighchartsAvailable()?Promise.resolve():new Promise((n,t)=>{const i=document.createElement("script");i.src="https://code.highcharts.com/highcharts.js";i.async=!0;i.onload=()=>{console.log("Highcharts loaded successfully"),n()};i.onerror=()=>{console.error("Failed to load Highcharts"),t(new Error("Failed to load Highcharts"))};setTimeout(()=>{window.isHighchartsAvailable()||t(new Error("Highcharts loading timeout"))},1e4);document.head.appendChild(i)})};window.addEventListener("beforeunload",()=>{window.lazyLoadUtils.cleanup()});document.addEventListener("DOMContentLoaded",()=>{window.lazyLoadUtils.measurePerformance("DOMContentLoaded")});console.log("Lazy loading utilities initialized");