# ?? ???? ????? ?????? - ???? ??????? ????????

## ? ????? ?????

### ?????? 1: ?????? ?? ???????
???? ??????? ???????? ?? ??????? ????????:
- ? `wwwroot/version.json`
- ? `wwwroot/js/version-manager.js`
- ? `wwwroot/service-worker.js` (????)
- ? `wwwroot/index.html` (????)
- ? `update-version.ps1`

### ?????? 2: ??? ???????

?? ?????? ??? ????? ?? PowerShell:
```powershell
.\update-version.ps1
```

????:
```
? Version updated: 1.0.0 ? 1.0.1
?? Build Date: 2024-01-15T10:30:00Z
?? Force Update: False
? Service Worker cache version updated
?? Version update complete!
?? New Version: 1.0.1
```

### ?????? 3: ???????

1. **???? ??????? ?? ???????**
2. **???? Console (F12)**
3. **??????:**
   ```
   ?? Version Manager: Initializing...
   ?? Current Version: Unknown
   ?? Server Version: 1.0.1
   ? Version stored: 1.0.1
   ? Periodic version check started (every 5 minutes)
   ```

4. **?? ?????? ??????? ??? ????:**
   ```powershell
   .\update-version.ps1
   ```

5. **????? 5 ????? ?? ??? ????? ??????**

6. **?????? ????? ????? ??????** ?? ????? ?????!

## ?? ????? ?????

```powershell
# ????? patch (1.0.0 ? 1.0.1)
.\update-version.ps1

# ????? minor (1.0.0 ? 1.1.0)
.\update-version.ps1 -VersionType minor

# ????? major (1.0.0 ? 2.0.0)
.\update-version.ps1 -VersionType major

# ????? ???? (force)
.\update-version.ps1 -ForceUpdate $true
```

## ?? ??? ?????? ?? ????

| ????? | ??? ??????? | ???? |
|------|------------|------|
| **patch** | Bug fixes? ??????? ????? | `1.0.0 ? 1.0.1` |
| **minor** | ????? ?????? ??????? ?????? | `1.0.0 ? 1.1.0` |
| **major** | ??????? ?????? breaking changes | `1.0.0 ? 2.0.0` |
| **forceUpdate** | ??????? ????? ???? | ?? ????? + ???? |

## ?? ??? ????? ??? ?????

### ??????? 1: Console
```javascript
// ???? ??????? ??????
localStorage.getItem('app_version')
// "1.0.1"

// ??? ????
VersionManager.manualCheck()
```

### ??????? 2: Network Tab
1. ???? DevTools ? Network
2. ???? ?? `version.json`
3. ??? ?? ??? ???? ?? 5 ?????

### ??????? 3: Application Tab
1. ???? DevTools ? Application
2. ???? ??? "Service Workers"
3. ??? ?? ??? `dashboard-cache-v1.0.1`

## ?? ????? ????

### ? ????:
- ?? ?????? ??????? ??? ?? Deploy
- ?????? Force Update ????????? ?????? ???
- ????? ??? Staging ?????
- ???? Console ?????? ?? ??? ???? ?????

### ? ?? ????:
- ?? ????? `version.json` ?????? (?????? ????????)
- ?? ?????? Force Update ??? ?????
- ?? ???? ??? Build ??? ????? ???????

## ?? ????? ?????????

### ????? ???? ?????:
?? `version-manager.js`:
```javascript
const VERSION_CHECK_INTERVAL = 180000; // 3 ?????
```

### ????? ?????? ?????:
?? `version-manager.js`:
```javascript
const keysToKeep = [
    'auth_token',
    'refresh_token',
    'user_preferences',
    'selected_language',
    'your_custom_key' // ??? ???
];
```

## ?? ?? ??????? ??????

| ??????? | ???? |
|---------|-----|
| ??????? ?? ???? | ???? ?? Console? ???? ????? ?????? |
| version.json ?? ????? | ???? ?? ??????? ???? ?? ??? ????? |
| Service Worker ?? ???? | Unregister ?? DevTools ?? ??? ??????? |
| ??????? ?? ???? | ???? ?? ????? SweetAlert |

## ?? ?? ????? ???????

???? ?????? ??????: `CACHE_UPDATE_SYSTEM.md`

---

**?? ???? ??? ????! ?? ?????? ?????? ?????:**
```powershell
.\update-version.ps1
```
