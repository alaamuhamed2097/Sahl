# ? ?? ??????? ?????!

## ?? ??????? ???????:

### 1. ??????? ????????:
- ? `wwwroot/version.json` - ??????? ???????
- ? `wwwroot/js/version-manager.js` - ???? ????????? ????????
- ? `wwwroot/service-worker.js` - ???? ?????? ?????
- ? `wwwroot/index.html` - ???? ?????? version-manager

### 2. ????? ???????:
- ? `update-version.ps1` - ?????? PowerShell ???????
- ? `update-version.bat` - ???? ???? ??????? ????????

### 3. ???????:
- ? `CACHE_UPDATE_SYSTEM.md` - ?????? ??????
- ? `QUICK_START.md` - ???? ????? ??????
- ? `README_INSTALLATION.md` - ??? ?????

---

## ?? ???? ???? ?? 3 ?????!

### ?????? 1: ???? ????? ??? `update-version.bat`
```
????? ?? ?????:
[1] Patch   - ????? ????
[2] Minor   - ???? ?????
[3] Major   - ????? ????
[4] Force   - ????? ????
```

### ?????? 2: ???? ??? ????? Enter
```
? Version updated: 1.0.0 ? 1.0.1
?? ?? ??????? ?????!
```

### ?????? 3: ???? ??????? (Deploy)
```
??????? ????? ???????? ??? ?????????? ???? 5 ?????
```

---

## ?? ??? ???? ???????

```
???????? ???? ???????
         ?
????? ?? version.json ????????
         ?
??? ??? ???? ????? ????:
  • ???? ????? ??????
  • ???? Service Workers
  • ???? ??????? ??????
  • ???? ????? ??????
         ?
???????? ??? ??????? ??????! ?
```

---

## ?? ????? ?????:

### ???? 1: ????? bug ????
```powershell
# ???? update-version.bat ????? [1]
# ?? ????:
.\update-version.ps1
```
???????: `1.0.0 ? 1.0.1`

### ???? 2: ????? ???? ?????
```powershell
# ???? update-version.bat ????? [2]
# ?? ????:
.\update-version.ps1 -VersionType minor
```
???????: `1.0.1 ? 1.1.0`

### ???? 3: ????? ???? ????
```powershell
# ???? update-version.bat ????? [4]
# ?? ????:
.\update-version.ps1 -ForceUpdate $true
```
???????: ??????? ?????? ????? ??????????!

---

## ?? ?????? ??????:

### ?? Console ???????:
```javascript
// 1. ???? ?? ??????? ??????
localStorage.getItem('app_version')

// 2. ???? ????????? ??????
VersionManager.manualCheck()

// 3. ???? ????? ??????
caches.keys().then(names => 
    Promise.all(names.map(name => caches.delete(name)))
)
```

### ??????? ?? Console:
```
?? Version Manager: Initializing...
?? Current Version: 1.0.0
?? Server Version: 1.0.1
?? New version detected! Updating...
? ?? ??????? ?????!
```

---

## ?? ????????? ????????:

### ????? ???? ????? (?????????: 5 ?????):
???? `wwwroot/js/version-manager.js` ?????:
```javascript
const VERSION_CHECK_INTERVAL = 300000; // ??????? ?????
```

### ????? ?????? ??????:
?? ??? ?????:
```javascript
const keysToKeep = [
    'auth_token',      // ? ?????
    'refresh_token',   // ? ?????
    'user_preferences',// ? ?????
    'selected_language',// ? ?????
    'my_custom_key'    // ??? ?????? ???
];
```

---

## ?? ??? ?? CI/CD:

### GitHub Actions:
??? ??? ?? `.github/workflows/deploy.yml`:
```yaml
- name: Update Version
  run: |
    .\update-version.ps1 -VersionType patch
    
- name: Commit & Push
  run: |
    git config user.name "Bot"
    git add wwwroot/version.json
    git commit -m "chore: bump version"
    git push
```

### Azure DevOps:
```yaml
- task: PowerShell@2
  inputs:
    filePath: 'update-version.ps1'
    arguments: '-VersionType patch'
```

---

## ?? ?? ???????:

| ??????? | ???? ?????? |
|---------|-------------|
| ? ??????? ?? ???? | ???? ????? ?? DevTools (F12) |
| ? version.json ?? ???? | ???? ?? ?????? ?????????? |
| ? Service Worker ???? | Unregister ?? Application Tab |
| ? ??????? ?? ???? | ???? ?? ????? SweetAlert |

### ???? ??????:
```javascript
// ?? Console ???????:
localStorage.clear();
caches.keys().then(n => Promise.all(n.map(k => caches.delete(k))));
location.reload(true);
```

---

## ?? ????? ???????

### ??????? ???????:
- ?? **QUICK_START.md** - ????? ??????
- ?? **CACHE_UPDATE_SYSTEM.md** - ????? ????????

### ????? ?????:
1. ???? DevTools ? Console
2. ???? ?? ?? ????? (????)
3. ???? ?? Network Tab
4. ???? Application Tab ? Service Workers

---

## ?? ???????!

???? ??????? ???????? ???? ?????!

### ??????? ???????:
1. ? ???? ??????? ?????: `update-version.bat`
2. ? ???? ??????? ?? ???????
3. ? ???? Console ?????? ?? ?????
4. ? ???? ??????? ??? ???? ????? ?????! ?

---

**??? ?????:** 2024  
**???????:** 1.0.0  
**??????:** ? ???? ???????
