# ?? ??? ???? Versioning ?????? ??? - ???? ????

## ? ??????? ????????? (5 ?????)

### ?????? ???????? ????????:

```powershell
# ??????:
.\migrate-to-project.ps1 `
    -TargetProject "D:\Path\To\Your\NewProject" `
    -BlazorPath "YourBlazorProjectFolder"

# ???? 1: Blazor ?? ???? Client
.\migrate-to-project.ps1 `
    -TargetProject "D:\MyProjects\MyApp" `
    -BlazorPath "MyApp.Client"

# ???? 2: Blazor ?? src\Web
.\migrate-to-project.ps1 `
    -TargetProject "D:\MyProjects\ECommerce" `
    -BlazorPath "src\Web"

# ?? ???????:
.\migrate-to-project.ps1 `
    -TargetProject "D:\MyProjects\MyApp" `
    -BlazorPath "MyApp.Client" `
    -IncludeDocumentation
```

### ???????:
```
? Scripts ??????
? wwwroot files ??????
? ???????? ????? ????????
? ???? ?????????!
```

---

## ?? ??????? ??????? (15 ?????)

### 1. ???? Scripts:
```powershell
$target = "D:\Your\New\Project"

Copy-Item "quick-update.bat" $target
Copy-Item "quick-update.ps1" $target
Copy-Item "update-version.ps1" $target
```

### 2. ???? wwwroot files:
```powershell
$wwwroot = "$target\YourBlazorProject\wwwroot"

Copy-Item "src\Presentation\Dashboard\wwwroot\version.json" $wwwroot
Copy-Item "src\Presentation\Dashboard\wwwroot\service-worker.js" $wwwroot
Copy-Item "src\Presentation\Dashboard\wwwroot\service-worker.published.js" $wwwroot
Copy-Item "src\Presentation\Dashboard\wwwroot\js\version-manager.js" "$wwwroot\js\"
```

### 3. ???? update-version.ps1:
```powershell
# ?? ??????? ??????? ???? update-version.ps1
# ???? ??? ?????:
$versionFilePath = Join-Path $PSScriptRoot "YourBlazorProject\wwwroot\version.json"

# ????:
$serviceWorkerPath = Join-Path $PSScriptRoot "YourBlazorProject\wwwroot\service-worker.js"

# ????:
$serviceWorkerPublishedPath = Join-Path $PSScriptRoot "YourBlazorProject\wwwroot\service-worker.published.js"
```

### 4. ???? index.html:
```html
<!-- ??? ??? </body> -->
<script src="js/version-manager.js"></script>
```

---

## ? ????????

```powershell
# ?? ??????? ??????:
cd D:\Your\New\Project

# 1. ???? ???????
.\quick-update.bat
# ???? 1

# 2. ????
cd YourBlazorProject
dotnet run

# 3. ???? ??????? ????? Console (F12)
```

**??? ?? ???:**
```
? Version Manager: Initializing...
?? Version stored: 1.0.1
?? Service Worker loaded: v1.0.1
```

---

## ?? ????? ?????? ?????? ??????

### ???? 1: Blazor Hosted (Client/Server)
```
MyProject/
??? MyProject.Client/        ?? Blazor WebAssembly
?   ??? wwwroot/
??? MyProject.Server/        ?? API
??? MyProject.Shared/

# ?????:
.\migrate-to-project.ps1 `
    -TargetProject "D:\MyProject" `
    -BlazorPath "MyProject.Client"
```

### ???? 2: Blazor Standalone
```
MyBlazorApp/
??? wwwroot/                 ?? Blazor WebAssembly ??????

# ?????:
.\migrate-to-project.ps1 `
    -TargetProject "D:\MyBlazorApp" `
    -BlazorPath "."
```

### ???? 3: Solution ????? src/
```
MySolution/
??? src/
?   ??? Web/                 ?? Blazor WebAssembly
?   ?   ??? wwwroot/
?   ??? Api/
??? tests/

# ?????:
.\migrate-to-project.ps1 `
    -TargetProject "D:\MySolution" `
    -BlazorPath "src\Web"
```

### ???? 4: Clean Architecture
```
ECommerce/
??? Presentation/
?   ??? ECommerce.Blazor/    ?? Blazor WebAssembly
?       ??? wwwroot/
??? Application/
??? Domain/

# ?????:
.\migrate-to-project.ps1 `
    -TargetProject "D:\ECommerce" `
    -BlazorPath "Presentation\ECommerce.Blazor"
```

---

## ?? ?????

### ????? ???? ?????:
?? `wwwroot/js/version-manager.js`:
```javascript
const VERSION_CHECK_INTERVAL = 600000; // 10 ????? ????? ?? 5
```

### ????? ???????:
?? `wwwroot/js/version-manager.js`:
```javascript
const message = forceUpdate 
    ? `????? ??? ?? [??? ??????] (${version})`
    : `????? ???? ?? [??? ??????] (${version})`;
```

### ??? ?????? ??????:
?? `wwwroot/js/version-manager.js`:
```javascript
const keysToKeep = [
    VERSION_STORAGE_KEY,
    LAST_CHECK_KEY,
    'auth_token',
    'your_custom_key' // ?? ??? ???
];
```

---

## ?? ??????? ??????

- **MIGRATION_TO_OTHER_PROJECT.md** - ???? ???? ???? ?????
- **DEPLOYMENT_GUIDE.md** - ???? ????? ??????
- **SERVICE_WORKERS_GUIDE.md** - ??? ??????

---

## ?? ?? ???????

### ???????: ???????? ?? ??? ???????

**?????:** ???????? ???

**????:**
```powershell
# ???? ?? ?????? ??????:
Get-ChildItem "YourBlazorProject\wwwroot"
# ??? ?? ??? ???? wwwroot
```

### ???????: version-manager.js ?? ?????

**????:**
1. ???? ?? ????? ?? `wwwroot/js/version-manager.js`
2. ???? ?? ????? ?? `index.html`:
```html
<script src="js/version-manager.js"></script>
```

### ???????: Service Worker ?? ????

**????:**
- ???? ?? ?????? HTTPS ?? localhost
- ???? ?? `service-worker.js` ?? `wwwroot/` (root)
- ???? Console ???????

---

## ?? ????!

?????? ???? ?? ?????? ??????! ??????? ???? ???????:

```powershell
# ?????
.\quick-update.bat

# ??????
dotnet run

# ???
dotnet publish -c Release
```

---

<div align="center">

**? ???? ????????? ?? ?? ????? Blazor WebAssembly!**

**?? ??????: ???? MIGRATION_TO_OTHER_PROJECT.md**

</div>
