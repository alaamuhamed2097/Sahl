# ?? ???? ??????? ???????? ????? - ?? ??????? ?????!

## ? ?? ?? ??????:

### 1?? ??????? ???????? ???????:
```
? src/Presentation/Dashboard/wwwroot/version.json
? src/Presentation/Dashboard/wwwroot/js/version-manager.js
? src/Presentation/Dashboard/wwwroot/service-worker.js (???????)
? src/Presentation/Dashboard/wwwroot/service-worker.published.js (???????) ?
? src/Presentation/Dashboard/wwwroot/index.html (????)
```

### 2?? ????? ???????:
```
? update-version.ps1 - ?????? PowerShell (???? ??? ??? service workers)
? update-version.bat - ???? ??????? ????????
? .vscode/launch.json - ????? VS Code
```

### 3?? ??????? ??????:
```
? README_INSTALLATION.md - ???? ???????
? QUICK_START.md - ????? ??????
? CACHE_UPDATE_SYSTEM.md - ?????? ??????
? API_DOCUMENTATION.md - ????? API
? SERVICE_WORKERS_GUIDE.md - ???? Service Workers ? ????
? EXAMPLE_VERSION_SETTINGS.html - ???? ????
? SUMMARY.md - ??? ?????
```

---

## ?? ???? ???? ?? 3 ?????:

### ?????? 1: ?? ?????? ???????
???? ????? ??? `update-version.bat` ?? ????:
```powershell
.\update-version.ps1
```

**?? ????? ????????:**
- ? `version.json` ? 1.0.1
- ? `service-worker.js` ? CACHE_VERSION = 'v1.0.1'
- ? `service-worker.published.js` ? APP_VERSION = 'v1.0.1'

### ?????? 2: ???? Build ???????
```powershell
dotnet build
```

### ?????? 3: ???? ???????
```powershell
# ???????
dotnet run

# ???????
dotnet publish -c Release
```

**?? ??? ?? ???! ??????? ????? ???????? ??? ??????????!**

---

## ?? ??? ???? ???????

```
???????? ???? ???????
         ?
version-manager.js ????? ????????
         ?
???? version.json ?? 5 ?????
         ?
??? ??? ????? ????:
  • ???? ????? ?????? ??
  • ???? Service Workers ???
  • ???? ????? ?????? ??
         ?
???????? ??? ??????? ??????! ??
```

---

## ?? Service Workers - ????? ?????! ?

| ????? | ????????? | ????? |
|------|----------|-------|
| **service-worker.js** | Development | `dotnet run` |
| **service-worker.published.js** | Production | `dotnet publish` |

**?? ?????:** `update-version.ps1` ???? ??? ??????? ????????!

**?? ???? ??????:** [SERVICE_WORKERS_GUIDE.md](SERVICE_WORKERS_GUIDE.md)

---

## ?? ????? ?????????:

| ????? | ????? | ??? ??????? | ???? |
|------|-------|-------------|------|
| **Patch** | `.\update-version.ps1` | Bug fixes | `1.0.0 ? 1.0.1` |
| **Minor** | `.\update-version.ps1 -VersionType minor` | ????? ????? | `1.0.0 ? 1.1.0` |
| **Major** | `.\update-version.ps1 -VersionType major` | ??????? ????? | `1.0.0 ? 2.0.0` |
| **Force** | `.\update-version.ps1 -ForceUpdate $true` | ??????? ???? | ???? |

---

## ?? ??????? ????????:

### ? ????? ?????? ???????
- ?? ???? ???????? ?? ???? ????? ??????
- ?? ???? ?????? ???? ???????
- ???? ???? ??? ?????

### ? ??? ???? ???
- ??? ?????? ?? 5 ?????
- ??? ???? ??? ???? ???????? ???????
- ??? ??? ??? tab ????

### ? ????? ???????? ??????
???????? ??????? ???? ??????:
- `auth_token` - ???? ????????
- `refresh_token` - ???? ???????
- `user_preferences` - ??????? ????????
- `selected_language` - ????? ????????

### ? ??????? ????
- ????? ???? ????????
- ???? ?????? ??? ????? ???????
- ????? ????? ????? ?????

### ? ??? Force Update
- ????????? ??????? ??????
- ????? ????? ?????
- ????? ??? ?????????? ??????

---

## ?? ??????? ??????:

### ????? ???? ?????:
?? `wwwroot/js/version-manager.js`:
```javascript
const VERSION_CHECK_INTERVAL = 180000; // 3 ????? (????? ?? 5)
```

### ????? ?????? ??????:
?? ??? ?????:
```javascript
const keysToKeep = [
    'auth_token',
    'refresh_token',
    'user_preferences',
    'selected_language',
    'my_custom_key' // ??? ???
];
```

### ????? ????? ???????:
```javascript
const message = `?? ?????? ????? ???? ?????? (${version})`;
```

---

## ??? ????? ???????:

### ?? PowerShell:
```powershell
# ????? patch
.\update-version.ps1

# ????? minor
.\update-version.ps1 -VersionType minor

# ????? major
.\update-version.ps1 -VersionType major

# ????? force
.\update-version.ps1 -ForceUpdate $true
```

### ?? Visual Studio Code:
```
Ctrl+Shift+P ? Tasks: Run Task ? ???? ??? ???????
```

### ?? Windows Explorer:
???? ????? ??? `update-version.bat` ????? ?????????

---

## ?? ?????? ??????:

### 1. ??????? ??????:
```powershell
# ?? ?????? ???????
.\update-version.ps1

# ???? ??????? ?? ???????
# ???? Console (F12)

# ??????:
?? Version Manager: Initializing...
?? Current Version: Unknown
?? Server Version: 1.0.1
? Version stored: 1.0.1
```

### 2. ?????? ???????:
```powershell
# ???? ??????? ??? ????
.\update-version.ps1

# ?? Console:
?? New version detected! Updating...
?? Clearing cache...
? ?? ??????? ?????!
```

### 3. ??? ???? ?? Console:
```javascript
// ??????? ??????
localStorage.getItem('app_version')

// ??? ????
await VersionManager.manualCheck()

// ??? ?????
caches.keys().then(n => Promise.all(n.map(k => caches.delete(k))))
```

---

## ?? ????? UI ?????????:

?????? ????? ?? `EXAMPLE_VERSION_SETTINGS.html` ??????:
- ?? "??? ?????????"
- ??? ??????? ??????
- ?? ??? ?????
- ??????? ?????

---

## ?? ?? ???????:

| ??????? | ???? |
|---------|------|
| ? ??????? ?? ???? | ???? DevTools ? Console ? ???? ?? ????? |
| ? version.json ?? ????? | ???? ?? ?????? ?????? |
| ? Service Worker ???? | Application Tab ? Unregister |
| ? ????? ?? ????? | ???? ?????? ?? DevTools |

### ???? ??????:
```javascript
// ?? Console
localStorage.clear();
sessionStorage.clear();
caches.keys().then(n => Promise.all(n.map(k => caches.delete(k))));
location.reload(true);
```

---

## ?? ???????? ????????:

### ??????? ?? Console:
```
? Version Manager: Initializing...
? Periodic version check started
? Current Version: 1.0.0
? Server Version: 1.0.1
? New version detected!
? Clearing cache...
? Storage cleaned
? Reloading application...
```

### ?? DevTools:
- **Console Tab:** ??????? ????????
- **Network Tab:** ????? version.json
- **Application Tab:** ????? ???? Service Workers

---

## ?? ???????:

### ???????:
- ?? `QUICK_START.md` - ????? ??????
- ?? `CACHE_UPDATE_SYSTEM.md` - ?????? ??????
- ?? `API_DOCUMENTATION.md` - API ??????
- ?? `SERVICE_WORKERS_GUIDE.md` - ???? Service Workers
- ?? `EXAMPLE_VERSION_SETTINGS.html` - ????? UI
- ?? `SUMMARY.md` - ??? ??????

### ???????:
- ?? `update-version.ps1` - PowerShell
- ??? `update-version.bat` - Windows
- ?? `.vscode/launch.json` - VS Code

---

## ?? Next Steps:

### 1. ???? ??????? ?????:
```powershell
.\update-version.ps1
```

### 2. ???? ??????? ????? Console

### 3. ???? ??? ???? ????? ??????? ????????! ?

---

## ?? ???????!

???? ??????? ???????? ????? ???? ????? ??????!

**???? ?? ????? ???? ???????? ?????????? ???? ?? ???? ????! ??**

---

## ?? ?????:

- ?? ???? ??????? ?????? ?? `CACHE_UPDATE_SYSTEM.md`
- ?? ???? Console ???????
- ??? ?????? DevTools ???????
- ?? ???? ???? ???????

---

**???????:** 1.0.0  
**???????:** 2024  
**??????:** ? ???? ???????

**?? ??????? ??????:** GitHub Copilot ??  
**??? ?????:** ?????

---

# ?? ?????! ?????? ???? ?????????! ??
