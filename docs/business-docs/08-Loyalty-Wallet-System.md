# نظام الولاء والمحافظ المالية

## نظام الولاء للمشتري (Customer Loyalty Program)

### مقدمة
نظام الولاء للمشتري هو آلية تمنح العميل نقاطًا مقابل عمليات الشراء والتفاعل داخل المنصة.

يساعد النظام في زيادة معدل الشراء، وتحسين ولاء العملاء، وتحفيزهم على العودة للشراء مرة أخرى.

**هذا النظام مماثل لما تستخدمه:**
- Noon Rewards
- Carrefour MyCLUB
- Shein Points
- Talabat Rewards

### أهداف النظام
- زيادة معدل الشراء المتكرر (Repeat Purchases)
- رفع متوسط قيمة الطلب (AOV)
- زيادة ولاء العملاء وتقليل churn
- تحفيز العملاء على التفاعل (Reviews – Shares – Referrals)

### مصادر النقاط (Point Earning Events)

| الحدث | عدد النقاط | ملاحظات |
|-------|------------|----------|
| شراء منتج | 1% – 5% من قيمة الطلب | الأكثر استخداماً |
| تقييم منتج | 5 – 20 نقطة | بعد المراجعة |
| إحالة صديق | 30 – 50 نقطة | بعد أول عملية شراء |
| إكمال البروفايل | 10 نقاط | مرة واحدة |
| حملات خاصة | مضاعفة النقاط | Double Points |

### استخدام النقاط

يمكن استبدال النقاط بـ:
- خصم نقدي مباشر
- شحن مجاني
- قسائم شراء
- استخدام في Flash Sales
- الدخول في السحوبات
- استبدالها بمنتجات عبر "Rewards Store"

### مستويات الولاء (Customer Tiers)

| المستوى | المتطلبات | المميزات |
|---------|-----------|----------|
| Bronze | مستخدم جديد | نقاط عادية |
| Silver | 6 طلبات سنوياً | +10% نقاط إضافية |
| Gold | 15 طلباً | شحن أسرع + Points Boost |
| Platinum | 30 طلباً | نقاط ×2 + دعم VIP |

### قواعد العمل (Business Rules)

- النقاط تُضاف بعد توصيل الطلب (Delivered)
- عند إرجاع الطلب يتم خصم النقاط تلقائياً
- النقاط لها صلاحية (12 شهراً)
- لا يمكن دمج النقاط مع بعض أنواع الـ Promo Codes
- العميل لا يمكنه تحويل النقاط لعميل آخر

### مثال واقعي

```
العميل اشترى بـ 1200 جنيه
→ يحصل على 24 نقطة (2%)

كتب Review
→ يحصل على 10 نقاط

الإجمالي = 34 نقطة
يستبدلهم بـ 3.4 جنيه خصم نقدي
```

## نظام الولاء للبائع (Seller Performance Program)

### مقدمة
نظام ولاء البائع هو نظام يعتمد على تقييم أداء البائع وليس على جمع نقاط مثل العملاء.

**يستخدم عالمياً في:**
- Amazon Seller Central
- Noon Partners Program
- AliExpress Seller Levels
- Etsy Star Seller
- Alibaba Gold Supplier

### الهدف
- تحسين جودة الخدمة
- تحفيز البائع على زيادة المبيعات
- تقليل الشكاوى
- رفع تقييم المنتجات
- دعم البائعين المميزين

### مكونات النظام

#### 1. Seller Performance Score
مكون من:
- نسبة الإلغاء
- سرعة الشحن
- تقييمات العملاء
- نسبة المرتجعات
- الالتزام بسياسات المنصة

#### 2. Seller Tier Levels

| المستوى | الشروط | الامتيازات |
|---------|--------|------------|
| Regular | جديد | عمولة عادية |
| Professional | +100 طلب | Boost بسيط |
| Gold | +500 طلب | عمولة أقل 1% |
| Platinum | +2000 طلب | دعم VIP + ظهور أعلى |

### الامتيازات

- تخفيض في العمولة
- أولوية في Buy Box
- دعم فني أسرع
- ظهور أعلى في نتائج البحث
- إمكانية دخول حملات White Friday
- رصيد إعلانات مجاني (Sponsored Ads Credits)

### قواعد العمل

- الترقيات تتم تلقائياً بناءً على نتائج آخر 90 يوماً
- أي مخالفات تؤثر مباشرة على مستوى البائع
- الانخفاض الحاد في الأداء ينقل البائع لمستوى أقل مباشرة
- المشاركة في الحملات متاحة فقط للبائعين ذوي المستوى الجيد

## نظام المحفظة للمشتري (Customer Wallet)

### مقدمة
محفظة العميل هي رصيد مالي موجود داخل حساب المستخدم، يمكن استخدامه لسداد قيمة الطلبات.

**موجود بشكل مشابه في:**
- Amazon Pay Balance
- Noon Wallet
- JumiaPay
- Talabat Wallet

### مصادر رصيد المحفظة

| المصدر | مثال |
|--------|------|
| Refund مبلغ المرتجع | عند إرجاع منتج |
| Cashback / نقاط | يتم تحويلها لمحفظة |
| Promo Credits | كوبونات تتضاف للمحفظة |
| هدايا (Gift Balance) | من المنصة |
| إيداع يدوي | عبر وسائل الدفع |

### استخدام المحفظة

- دفع كامل قيمة الطلب
- دفع جزء من الطلب (Split Payment)
- شراء قسائم
- استخدام في الشحن

### قواعد العمل

- رصيد المحفظة لا يمكن سحبه نقداً (على حسب سياسة المنصة)
- رصيد الاسترجاع يدخل المحفظة فور معالجة المرتجع
- كل عملية محفظة يتم تسجيلها في Ledger محاسبي
- لا يمكن نقل الرصيد بين العملاء

## نظام المحفظة للبائع (Seller Wallet)

### مقدمة
محفظة البائع تمثل الحساب المالي للبائع داخل المنصة.

### ما الذي يدخل محفظة البائع؟

| بند | شرح |
|-----|------|
| صافي أرباح الطلبات | بعد خصم العمولة |
| تعويضات المنصة | عند حدوث أخطاء |
| Bonus من الحملات | Co-Funded Campaigns |
| رصيد الإعلانات المتبقي | من Sponsored Ads |

### ما الذي يخرج من المحفظة؟

| بند | شرح |
|-----|------|
| عمولة المنصة | Fees & Commission |
| رسوم الشحن | Fulfillment |
| رسوم الحملات | Participation Fees |
| تكلفة الإعلانات | Sponsored Ads |

### التحويل البنكي (Withdrawals)

- البائع يستطيع سحب رصيده أسبوعياً أو شهرياً
- بعد خصم كل الرسوم
- التحويل يتم عبر Bank Transfer أو STC Pay أو Wallets
- كل عملية تحويل لها Invoice + Statement

## خزنة المنصة (Platform Treasury)

أكبر عنصر محاسبي في النظام المالي كله.

### وظائف الخزنة

الخزنة تتحكم في:
- كل العمليات المالية
- كل المحافظ
- كل الإضافات والخصومات
- أرصدة المنصة والبائعين والعملاء
- رسوم العمولة
- المدفوعات الصادرة والواردة

### أنواع الحسابات في الخزنة

| الحساب | النوع | الاستخدام |
|--------|-------|-----------|
| Customer Wallet | Liability | أموال مستحقة للعميل |
| Seller Wallet | Liability | أموال مستحقة للبائع |
| Marketplace Commission | Revenue | دخل المنصة |
| Shipping Fees | Revenue | رسوم الشحن |
| Payment Gateway Fees | Expense | تكاليف المدفوعات |

## السيناريوهات العملية

### سيناريو 1 — عميل اشترى منتج بـ 1000 جنيه

- المنصة تسجل 1000 في Treasury
- تحجز 1000 للبائع Pending
- تضيف 20 نقطة Loyalty
- لو العميل أرجع المنتج → 1000 تتحول لمحفظة العميل Wallet
- البائع لا يحصل على أي رصيد

### سيناريو 2 — بائع باع منتج بـ 800 جنيه

- عمولة المنصة 10% = 80
- رصيد البائع = 720
- يتم تحويله له بعد 7 أيام

### سيناريو 3 — Promo Code من المنصة (خصم 50 جنيه)

- Treasury يتحمل 50
- لا يتم خصمها من البائع
- تظهر كـ Marketing Expense

### سيناريو 4 — Wallet البائع عليه رسوم

- Fees = 200
- لو الرصيد 150 فقط
- → البائع يصبح Negative Balance
- → لا يسمح له بشحن الطلبات حتى يسدد

## نظام النزاعات (Dispute System)

مهم جدًا للـ Marketplace

### حالات النزاع

- منتج غير مطابق للوصف
- منتج تالف
- تأخر كبير في الشحن
- البائع يرفض الإرجاع
- العميل يفتح طلب استرجاع غير صحيح

### خطوات النزاع

1. **العميل يقدّم نزاعاً** - يشبه Amazon A-to-Z
2. **البائع يرد (Required Response)** - خلال 48 ساعة
3. **المنصة تدرس الأدلة:**
   - صور
   - فيديو
   - Tracking
   - فواتير
   - رسائل
4. **اتخاذ القرار**

### أنواع القرارات

| نوع القرار | مثال |
|-----------|------|
| لصالح العميل | استرجاع كامل + رسوم شحن |
| لصالح البائع | رفض النزاع |
| حل وسط | Partial Refund |

### من يتحمل التكلفة؟

**مثل Amazon/Noon:**
- لو المشكلة من البائع → البائع يتحمل
- لو المشكلة من الشحن → الشاحن يتحمل
- لو مشكلة تقنية → المنصة تتحمل
