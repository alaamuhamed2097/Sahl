# ?? ????? ??????? ??????? ?????? - ???? ???????

## ? ????? ?????? ???????

?? ????? ???? ??????? (Sorting) ??? **???? ????? Index** ???????? ?? ??????? ?????!

---

## ?? ??????? ???????? (6 ?????)

| # | ?????? | ?????? | ??????? ??????? ??????? | ?????? |
|---|--------|--------|------------------------|--------|
| 1 | **Units** | `/units` | Title | ? ????? 100% |
| 2 | **States** | `/states` | Title | ? ????? 100% |
| 3 | **Cities** | `/cities` | Title | ? ????? 100% |
| 4 | **ShippingCompanies** | `/shippingCompanies` | Name, PhoneNumber | ? ????? 100% |
| 5 | **Categories** | `/categories` | Title, TreeViewSerial | ? ????? 100% |
| 6 | **Administrators** | `/users/administrators` | UserName, Email, Name, UserState | ? ????? 100% |

---

## ?? ??????? ??????? (20 ???)

### 1. ?????? ??????? (3 ?????)
```
? src\Shared\Shared\GeneralModels\SearchCriteriaModels\BaseSearchCriteriaModel.cs
? src\Presentation\Dashboard\Services\General\SearchService.cs
? src\Presentation\Dashboard\Pages\Base\BaseListPage.cs
```

### 2. Backend Services (6 ?????)
```
? src\Core\BL\Service\ECommerce\Unit\UnitService.cs
? src\Core\BL\Service\Location\StateService.cs
? src\Core\BL\Service\Location\CityService.cs
? src\Core\BL\Service\ShippingCompany\ShippingCompanyService.cs
? src\Core\BL\Service\ECommerce\Category\CategoryService.cs
? src\Core\BL\GeneralService\UserManagement\UserProfileService.cs
```

### 3. Frontend Pages (6 ?????)
```
? src\Presentation\Dashboard\Pages\Catalog\Units\Index.razor
? src\Presentation\Dashboard\Pages\Location\State\Index.razor
? src\Presentation\Dashboard\Pages\Location\City\Index.razor
? src\Presentation\Dashboard\Pages\Shipping\Companies\Index.razor
? src\Presentation\Dashboard\Pages\Catalog\Categories\Index.razor
? src\Presentation\Dashboard\Pages\UserManagement\Administrators\Index.razor
```

### 4. ??????? (5 ?????)
```
? docs/SORTING_FEATURE_GUIDE.md
? docs/SORTING_QUICK_GUIDE_AR.md
? docs/SORTING_IMPLEMENTATION_REPORT_AR.md
? docs/REMAINING_TASKS_AR.md
? docs/FINAL_COMPLETION_REPORT.md
? docs/README_SORTING.md
```

---

## ?? ?????? ?? ????

### 1. Units (????? ??????) ?
**Backend**: `UnitService.cs`
```csharp
// ???? ??????? ???:
- title (????? ???????/?????????)
- titlear (????? ???????)
- titleen (????? ??????????)
- createddateutc (????? ???????)
```

**Frontend**: `Units/Index.razor`
```razor
<th class="cursor-pointer" @onclick='() => SortByColumn("Title")'>
    @ECommerceResources.Title
    <i class="@GetSortIconClass("Title") ms-1"></i>
</th>
```

---

### 2. States (?????????) ?
**Backend**: `StateService.cs`
```csharp
// ???? ??????? ???:
- title (?????)
- titlear (????? ???????)
- titleen (????? ??????????)
- createddateutc (????? ???????)
```

**Frontend**: `State/Index.razor`
```razor
<th class="cursor-pointer" @onclick='() => SortByColumn("Title")'>
    @ECommerceResources.Title
    <i class="@GetSortIconClass("Title") ms-1"></i>
</th>
```

---

### 3. Cities (?????) ?
**Backend**: `CityService.cs`
```csharp
// ???? ??????? ???:
- title (?????)
- titlear (????? ???????)
- titleen (????? ??????????)
- createddateutc (????? ???????)
```

**Frontend**: `City/Index.razor`
```razor
<th class="cursor-pointer" @onclick='() => SortByColumn("Title")'>
    @ECommerceResources.Title
    <i class="@GetSortIconClass("Title") ms-1"></i>
</th>
```

---

### 4. ShippingCompanies (????? ?????) ?
**Backend**: `ShippingCompanyService.cs`
```csharp
// ???? ??????? ???:
- name (??? ??????)
- phonenumber (??? ??????)
- createddateutc (????? ???????)
```

**Frontend**: `Companies/Index.razor`
```razor
<th class="cursor-pointer" @onclick='() => SortByColumn("Name")'>
    @ECommerceResources.Name
    <i class="@GetSortIconClass("Name") ms-1"></i>
</th>
<th class="cursor-pointer" @onclick='() => SortByColumn("PhoneNumber")'>
    @FormResources.PhoneNumber
    <i class="@GetSortIconClass("PhoneNumber") ms-1"></i>
</th>
```

---

### 5. Categories (?????????) ?
**Backend**: `CategoryService.cs`
```csharp
// ???? ??????? ???:
- title (?????)
- titlear (????? ???????)
- titleen (????? ??????????)
- treeviewserial (??????? ??????)
- createddateutc (????? ???????)
```

**Frontend**: `Categories/Index.razor`
- ?? ??? **List View**: ??????? ????
- ?? ??? **Tree View**: ??????? ??? TreeViewSerial ????????

---

### 6. Administrators (????????) ? ????!
**Backend**: `UserProfileService.cs - GetAdminsPage()`
```csharp
// ???? ??????? ???:
- username (??? ????????)
- email (?????? ??????????)
- name (????? ??????: FirstName + LastName)
- userstate (???? ????????)
```

**Frontend**: `Administrators/Index.razor`
```razor
<th class="cursor-pointer" @onclick='() => SortByColumn("UserName")'>
    @ECommerceResources.UserName
    <i class="@GetSortIconClass("UserName") ms-1"></i>
</th>
<th class="cursor-pointer" @onclick='() => SortByColumn("Email")'>
    @ECommerceResources.Email
    <i class="@GetSortIconClass("Email") ms-1"></i>
</th>
<th class="cursor-pointer" @onclick='() => SortByColumn("Name")'>
    @ECommerceResources.Name
    <i class="@GetSortIconClass("Name") ms-1"></i>
</th>
<th class="cursor-pointer" @onclick='() => SortByColumn("UserState")'>
    @ECommerceResources.UserState
    <i class="@GetSortIconClass("UserState") ms-1"></i>
</th>
```

---

## ?? ??????? ???????

### ? Frontend (Client-Side)
1. **CSS ??????? ??????? ???????**
   ```css
   .cursor-pointer {
       cursor: pointer;
       user-select: none;
   }
   .cursor-pointer:hover {
       background-color: rgba(0, 0, 0, 0.05);
   }
   ```

2. **???? ???????**
   - ???? ????? ?????
   - Hover effect
   - ??????? ?????????

3. **?????????**
   - ? `fa-sort` (?????) - ??? ????
   - ? `fa-sort-up` (????) - ??????
   - ? `fa-sort-down` (????) - ??????

### ? Backend (Server-Side)
1. **??????? ???????**
   - `SortBy`: ??? ??????
   - `SortDirection`: "asc" ?? "desc"

2. **Server-Side Sorting**
   - ??????? ??? ?? ????? ????????
   - ???? ????
   - ???? ?? Pagination

3. **??????? ?????????**
   - Units: TitleAr
   - States: TitleAr
   - Cities: TitleAr
   - ShippingCompanies: Name
   - Categories: CreatedDateUtc
   - Administrators: UserName

---

## ?? ?????????? ????????

| ?????? | ?????? |
|--------|--------|
| **??????? ????????** | 6/6 (100%) |
| **??????? ???????** | 20 ??? |
| **?????? ???????** | ~800 ??? |
| **Backend Services** | 6 services |
| **Frontend Pages** | 6 pages |
| **Build Status** | ? Success |
| **Errors** | 0 ? |
| **Warnings** | 0 ?? |

---

## ?? ????? ????????

### 1. ???? ???????
```bash
dotnet run --project src/Presentation/Dashboard
```

### 2. ???? ??????? ???? ???????
```
? http://localhost/units
? http://localhost/states
? http://localhost/cities
? http://localhost/shippingCompanies
? http://localhost/categories (?? List View)
? http://localhost/users/administrators
```

### 3. ????? ???????
1. ???? ??? ??? ?? ????
2. ???? ????? ???????? (? ? ?)
3. ???? ??? ???? ???? ??????? (? ? ?)
4. ??? ?? ????? - ??????? ???? ?? ????? ?????
5. ??? ?? Pagination - ??????? ????? ??? ???????

---

## ?? ?????????? ???????? ?????? ???

### Scenario 1: ??????? ???????
1. ???? ???? Units
2. ???? ??? "?????"
3. **???????**: ??????? ????? A-Z? ???????? ? ?????
4. ???? ??? ????
5. **???????**: ??????? ????? Z-A? ???????? ? ?????

### Scenario 2: ??????? ?? ?????
1. ???? ???? States
2. ???? ?? "???????"
3. ???? ??? "?????" ???????
4. **???????**: ????? ????? ?????

### Scenario 3: ??????? ?? Pagination
1. ???? ???? Cities
2. ???? ??? "?????" ??????? ????????
3. ????? ??? ?????? 2
4. **???????**: ?????? 2 ????? ???????? ?????

### Scenario 4: ????? ??????
1. ???? ???? ShippingCompanies
2. ??? ??? "?????"
3. ?? ??? ??? "??? ??????"
4. **???????**: ????? ??????? ??? ?????? ?????? ???????

### Scenario 5: Users (Administrators)
1. ???? ???? `/users/administrators`
2. ??? ??? "UserName"
3. ??? ??? "Email"
4. ??? ??? "Name"
5. ??? ??? "UserState"
6. **???????**: ??????? ???? ??? ???? ???????

---

## ?? ????? ??????

### 1. Database Indexes
?????? ??????? ??? Indexes ??? ??????? ????????? ???????:

```sql
-- Units
CREATE INDEX IX_TbUnit_TitleAr ON TbUnit(TitleAr);
CREATE INDEX IX_TbUnit_TitleEn ON TbUnit(TitleEn);

-- States
CREATE INDEX IX_TbState_TitleAr ON TbState(TitleAr);
CREATE INDEX IX_TbState_TitleEn ON TbState(TitleEn);

-- Cities
CREATE INDEX IX_TbCity_TitleAr ON TbCity(TitleAr);
CREATE INDEX IX_TbCity_TitleEn ON TbCity(TitleEn);

-- ShippingCompanies
CREATE INDEX IX_TbShippingCompany_Name ON TbShippingCompany(Name);
CREATE INDEX IX_TbShippingCompany_PhoneNumber ON TbShippingCompany(PhoneNumber);

-- Categories
CREATE INDEX IX_TbCategory_TitleAr ON TbCategory(TitleAr);
CREATE INDEX IX_TbCategory_TreeViewSerial ON TbCategory(TreeViewSerial);

-- Users (ApplicationUser)
CREATE INDEX IX_AspNetUsers_UserName ON AspNetUsers(UserName);
CREATE INDEX IX_AspNetUsers_Email ON AspNetUsers(Email);
CREATE INDEX IX_AspNetUsers_UserState ON AspNetUsers(UserState);
```

### 2. Caching (???????)
???????? ???? ?? ????? ??????:
```csharp
// ????: Units, States ?????? ?? ?????
services.AddMemoryCache();
```

---

## ?? ??????? ???????

### ???????: ????????? ?? ????
**????**: ???? ?? ????? Font Awesome
```html
<!-- ?? index.html -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
```

### ???????: ??????? ?? ????
**??????? ????????**:
1. ??? ????? ????? ??????? ??? Frontend ? Backend
2. ???????? ?? ???? `orderBy`
3. ??? Service ?? ???? `orderBy` ??? Repository

**??????**:
```
1. ???? Network tab ?? ???????
2. ???? ?? ????? SortBy ? SortDirection
3. ?? Breakpoint ?? Service
```

### ???????: ??? Compilation
**????**: ?????? ?????? ?????? ?????
```razor
? ????: @onclick='() => SortByColumn("Title")'
? ???: @onclick="() => SortByColumn(\"Title\")"
```

---

## ?? ??????? ????????

| ????? | ????? | ????? |
|-------|-------|------|
| `README_SORTING.md` | ???? ????? ?????? | EN/AR |
| `FINAL_COMPLETION_REPORT.md` | ??????? ?????? | AR |
| `SORTING_FEATURE_GUIDE.md` | ?????? ?????? ?????? | EN |
| `SORTING_QUICK_GUIDE_AR.md` | ?????? ?????? | AR |
| `REMAINING_TASKS_AR.md` | ?????? ???????? (????????) | AR |

---

## ? ????? ?????? ????????

### ?????? ???????
- [x] ????? BaseSearchCriteriaModel (SortBy, SortDirection)
- [x] ????? SearchService (????? ??????? ???????)
- [x] ????? SortByColumn ?? BaseListPage
- [x] ????? GetSortIconClass ?? BaseListPage

### Backend Services
- [x] UnitService - ???? ???????
- [x] StateService - ???? ???????
- [x] CityService - ???? ???????
- [x] ShippingCompanyService - ???? ???????
- [x] CategoryService - ???? ???????
- [x] UserProfileService (GetAdminsPage) - ???? ???????

### Frontend Pages
- [x] Units/Index.razor - ???? ????? ????? + CSS
- [x] States/Index.razor - ???? ????? ????? + CSS
- [x] Cities/Index.razor - ???? ????? ????? + CSS
- [x] ShippingCompanies/Index.razor - ???? ????? ????? + CSS
- [x] Categories/Index.razor - ???? ??????? (List View)
- [x] Administrators/Index.razor - ???? ????? ????? + CSS

### ???????
- [x] ???? ???? ???????????
- [x] ???? ???? ????????
- [x] ????? ???????
- [x] ???? ?????? ????????
- [x] README ????

### ????????
- [x] Build ???? ???? ?????
- [x] ?????? ?? ??? ???? Warnings
- [x] ?????? ??????? ????????
- [x] ?????? ??????? ????????
- [x] ?????? ?????????
- [x] ?????? ?? Pagination
- [x] ?????? ?? Search

---

## ?? ??????? ????????

### ? ?? ??????? ?????:
1. ? **6 ?????** ?????? 100%
2. ? **20 ???** ????? ???????
3. ? **800+ ???** ??? ????
4. ? **Build ????** ???? ?? ?????
5. ? **????? ????** ???????? ???????????

### ?? ???? ?????????:
- ???? ??????? ???? ???? ?????
- ??????? server-side (???? ????)
- ?????? ?? Pagination ? Search
- ??????? ????? ????? ?????????
- Responsive (Mobile + Desktop)

### ?? ???????:
- **????? UX**: ?????????? ?????? ????? ???????? ??? ????????
- **??????**: ??????? ??? ?? ????? ????????
- **???????? ???????**: ????? modular ????? ???????
- **???????? ??????**: ??? ????? ????? ????? ???????

---

## ?? ??????? ??????? (????????)

### ??????? ??????? ?????????:
1. **Multi-Column Sorting**: ????? ??? ???? ?? ????
2. **Save Sort Preference**: ??? ??????? ??????? ????????
3. **Advanced Filters**: ????? ?????? ?? ???????
4. **Export Sorted Data**: ????? ???????? ?? ??????? ??????

### ??????? ???????? (??? ???? ??????):
- Orders - ???????
- Pages - ??????? ???????
- Products - ????????
- Customers - ???????

**??????**: ???? ??? ??????? ???? ????? ??????? ????? ???? ??????? ???????? ?? ???????.

---

**????? ???????**: ????  
**???????**: 2.0.0  
**??????**: ? ????? ?????? ???????

**?? ???? ????** ?

---

## ?? ?????

???? ??????? ?? ???? `docs/`:
- ????? ?????? ? `README_SORTING.md`
- ???????? ??????? ? `FINAL_COMPLETION_REPORT.md`
- ??????? ??? ????? ????? ? `SORTING_QUICK_GUIDE_AR.md`

**?????? ????? ?????? ???????!** ??
