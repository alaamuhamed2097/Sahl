# ????? ????? ???????? ?????? ?? ????

????? ????? ????? ??????? ???????? ?? `ApplicationDbContext` ?? ??? ????? ??? ????? ?? ???? ERD ????? ????? Mermaid.

> ??????: ??????? ??????? ?????? ?? `ApplicationDbContext` ?? ???????. ??? ??????? ?? ??????? ??? ?????? (Domain) ?????? ???????.

---

## 1. ????? ??????? ??????? (Catalog / Attribute / Category)
- `TbAttributes`  
  ???? ????? (Attributes) ?????? — ???? ??????? ?????? ????????.
- `TbAttributeOptions`  
  ?????? ?? ????? (??? ?????? ?????).
- `TbCategories`  
  ???? ????????? (???????) ???????? ????????.
- `TbCategoryAttributes`  
  ??? ????????? ???????? ??????? ???.

## 2. ????? ???????? ????????
- `TbBrands`  
  ???? ????????? (Brand) ????????? ????????? ?????????.
- `TbBrandRegistrationRequests`  
  ????? ????? ????? ????? ?? ????????.
- `TbBrandDocuments`  
  ??????? ????? ??? ??? ????? ?????.
- `TbAuthorizedDistributors`  
  ?????? ?????? ??????? ????????.

## 3. ?????? ????????
- `TbCurrencies`  
  ??????? ????????.
- `TbPriceHistories`  
  ??? ????? ???????.
- `TbQuantityPricings`  
  ????? ??? (????? ????? ??? ????).
- `TbCustomerSegmentPricings`  
  ????? ??? ????? ???????.

## 4. ????? ??????? (Items)
- `TbItems`  
  ???? ???????? (Items).
- `TbItemAttribute`  
  ??? ????? ??????.
- `TbItemAttributeCombinationPricings`  
  ????? ??????? ???? ??????.
- `TbItemImages`  
  ??? ??????.
- `TbItemCombinations`  
  ?????? ?????? (??? ???? - ??? - ??? ??????).
- `TbCombinationAttributes`  ? `TbCombinationAttributesValues`  
  ????? ????? ???????? ??? ??????.

## 5. ????????? ??????????
- `TbCouponCodes`  
  ????? ?????/???.
- `TbSettings`  
  ??????? ???? ??????.

## 6. ????? ???????? ???????????
- `TbShippingCompanies`  
  ????? ?????.
- `TbUnits`  
  ????? ????.
- `TbUnitConversions`  
  ??????? ???????.
- `TbWarehouses`  
  ???????? ???????.

## 7. ?????? ????????
- `TbCountries`, `TbStates`, `TbCities`  
  ????? ?????? (???? ?????? ?????).

## 8. ???????? ????????
- `TbVendors`  
  ??????? ????????.
- `TbCustomers`  
  ??????? ???????.

## 9. ??????? ????? ??????
- `TbCustomerWallets`, `TbVendorWallets`, `TbWalletTransactions`, `TbPlatformTreasuries`  
  ????? ??????? ?????????? ?????????? ?????? ??????.
- `TbLoyaltyTiers`, `TbCustomerLoyalties`, `TbLoyaltyPointsTransactions`  
  ???? ??????? ?????? ???? ???? ???????.

## 10. ??????? ???? Flash Sales
- `TbCampaigns`  
  ????? ???????.
- `TbCampaignProducts`, `TbCampaignVendors`  
  ??? ???????? ????????? ???????.
- `TbFlashSales`, `TbFlashSaleProducts`  
  ??????? ????? ?????????.

## 11. ????????? ??????????
- `TbProductReviews`, `TbSalesReviews`, `TbDeliveryReviews`, `TbReviewVotes`  
  ??????? ???????? ????????? ??????????.

## 12. ????????? ??????????
- `TbNotifications`, `TbUserNotifications`, `TbNotificationChannels`, `TbNotificationPreferences`  
  ????? ??????? ??????? ????????? ????? ??????? ??????????.

## 13. ??????? ????????
- `TbPages`, `TbContentAreas`, `TbMediaContents`  
  ????? ?????? ???????? ????????.

## 14. ??? ??????? (Support)
- `TbSupportTickets`, `TbSupportTicketMessages`, `TbDisputes`, `TbDisputeMessages`  
  ????? ????? ????? ??????? ?????????.

## 15. ?????? ????????? (Offers / Warranty)
- `TbOffers`, `TbOfferCombinationPricings`, `TbOfferConditions`, `TbWarranties`, `TbUserOfferRatings`  
  ????? ???? ??????? ?????? ????????.

## 16. ??????? ?????? (Order)
- `TbOrders`, `TbOrderDetails`, `TbShippingDetails`, `TbRefundRequests`  
  ????? ??????? ??????? ?????? ?????? ?????? ?????????.

## 17. ???????? ?????? (Fulfillment & Inventory)
- `TbFulfillmentMethods`, `TbFBMInventories`, `TbFulfillmentFees`, `TbFBMShipments`  
  ??? ??????? (FBS/FBM)? ????? ??????? ???? ???????? ?????? FBM.
- `TbMoitems`, `TbMortems`, `TbMovitemsdetail`  
  ????? ?????? ?????? ??????? (??? ??????? ?? ???????).

## 18. ??????? ??? ?????? ????????
- `TbHomepageBlocks`, `TbBlockProducts`  
  ??? ????? ??? ??????? ???? ???????? ???????.

## 19. ???? ???????? (Visibility)
- `TbProductVisibilityRules`, `TbSuppressionReasons`, `TbVisibilityLogs`  
  ????? ????/????? ??????? ????? ??????? ???? ?????????.

## 20. ??????? ???????
- `TbVideoProviders`  
  ????? ??????? (YouTube, Vimeo ...).

---

# ERD ??????? (Mermaid)

???? ???? ??? ???????? ???????? ????????? ?????. ????? ???? ?? ?? ???? ???? Mermaid (??? VS Code ?? ???? Mermaid) ?? ?????? ??? ???? ???????? ????? Mermaid.

```mermaid
erDiagram
    TBVENDOR ||--o{ TBBRANDS : "has"
    TBBRANDS ||--o{ TBBRANDDOCUMENTS : "has_documents"
    TBVENDOR ||--o{ TBITEMS : "lists"
    TBCATEGORY ||--o{ TBITEMS : "contains"

    TBITEMS ||--o{ TBITEMIMAGES : "has"
    TBITEMS ||--o{ TBITEMATTRIBUTE : "has_attributes"
    TBITEMS ||--o{ TBITEMCOMBINATIONS : "has_combinations"
    TBITEMCOMBINATIONS ||--o{ TBCOMBINATIONATTRIBUTES : "has"

    TBITEMS ||--o{ TBCAMPAIGNPRODUCTS : "in_campaign"
    TBCAMPAIGNS ||--o{ TBCAMPAIGNPRODUCTS : "contains"
    TBCAMPAIGNS ||--o{ TBCAMPAIGNVENDORS : "has_vendors"

    TBCUSTOMER ||--o{ TBORDERS : "places"
    TBORDERS ||--o{ TBORDERDETAILS : "contains"
    TBORDERDETAILS }o--|| TBITEMS : "for_item"

    TBCUSTOMER ||--o{ TBCUSTOMERWALLETS : "has_wallet"
    TBVENDOR ||--o{ TBVENDORWALLETS : "has_wallet"

    TBCUSTOMER ||--o{ TBLOYALTYPOINTSTRANSACTIONS : "has_transactions"
    TBLOYALTYTIERS ||--o{ TBCUSTOMERLOYALTIES : "applies"

    TBWAREHOUSE ||--o{ TBFBMINVENTORIES : "stocks"
    TBFBMINVENTORIES }o--|| TBITEMS : "for_item"

    TBPRODUCTVISIBILITYRULES ||--o{ TBSUPPRESSIONREASONS : "has_reasons"

    TBSUPPORTTICKETS ||--o{ TBSUPPORTTICKETMESSAGES : "has_messages"

    TBFLASHSALES ||--o{ TBFLASHSALEPRODUCTS : "contains"

    TBHOMEPAGEBLOCKS ||--o{ TBBLOCKPRODUCTS : "contains"

    %% Entities declarations (readability)
    TBVENDOR {
      Guid Id
      string Name
    }
    TBBRANDS {
      Guid Id
      Guid VendorId
      string BrandName
      int VerificationStatus
    }
    TBBRANDDOCUMENTS {
      Guid Id
      Guid BrandRegistrationRequestId
      string DocumentPath
    }
    TBITEMS {
      Guid Id
      string Title
      Guid BrandId
      Guid CategoryId
    }
    TBORDERS {
      Guid Id
      Guid CustomerId
      decimal Total
    }
    TBORDERDETAILS {
      Guid Id
      Guid OrderId
      Guid ItemId
      int Quantity
      decimal Price
    }
    TBCAMPAIGNS {
      Guid Id
      string Title
      DateTime StartDate
      DateTime EndDate
    }
    TBCAMPAIGNPRODUCTS {
      Guid Id
      Guid CampaignId
      Guid ItemId
    }
    TBCUSTOMER {
      Guid Id
      string UserId
      string FirstName
      string LastName
    }
    TBFBMINVENTORIES {
      Guid Id
      Guid ItemId
      int AvailableQuantity
    }
    TBPRODUCTVISIBILITYRULES {
      Guid Id
      Guid ItemId
      int VisibilityStatus
    }
```

---

# ????? ????? ??? ????? ????? ???????? (?????? ???? ??????? ???????? ???)

????? ????? ?? `DbSet<>` ??????? ?? `ApplicationDbContext` (?????? ??????) ?? ??? ???? ?????? ?? ????.

> ??????: ??? ??????? ?? ??????? ?? `src/Infrastructure/DAL/ApplicationContext/ApplicationDbContext.cs`? ?????? ??? ???? ??????? (Entities) ?Views ??????? ????.

---

## ????? (Tables) - ?????? ??? ??????

### Attribute & Category Management
- `TbAttributes` — ????? ?????? ?????? (?????: ?????? ?????).
- `TbAttributeOptions` — ?????? ?? ????? (????? ????? ???????).
- `TbCategories` — ???????/????? ????????.
- `TbCategoryAttributes` — ??? ????????? ???????? ??????? ???.

### Brand Management
- `TbBrands` — ????????? (???????? ????????) ???????/????????.
- `TbBrandRegistrationRequests` — ????? ????? ????? ????? ?? ????????.
- `TbBrandDocuments` — ??????? ????? ?????? ????? ???????.
- `TbAuthorizedDistributors` — ?????? ?????? ??????? ????????.

### Currency Management
- `TbCurrencies` — ??????? ????????.

### Item Management
- `TbItems` — ???????? (Items).
- `TbItemAttribute` — ??? ??????? ????????.
- `TbItemAttributeCombinationPricings` — ????? ????? ??????? ?????? (combinations pricing).
- `TbItemImages` — ??? ????????.
- `TbItemCombinations` — ?????? ?????? (?????: ???? ?????+???).
- `TbCombinationAttributes` — ????? ????? ????????.
- `TbCombinationAttributesValues` — ??? ????? ????????.

### Notification Management
- `TbNotifications` — ?????/??????? ?????? ??????.
- `TbUserNotifications` — ??????? ????? ??????????.
- `TbNotificationChannels` — ????? ????????? (Email, SMS, Push ...).
- `TbNotificationPreferences` — ??????? ????? ????????.

### Page & Content Management
- `TbPages` — ????? ??????? ??????? (CMS pages).
- `TbContentAreas` — ????? ????? ??? ????? (sections).
- `TbMediaContents` — ?????/????? ????? ???????.

### Coupon & Settings
- `TbCouponCodes` — ????? ???????/?????????.
- `TbSettings` — ??????? ??????/????? ???????.

### Shipping & Units
- `TbShippingCompanies` — ????? ????? ?????????.
- `TbUnits` — ????? ?????? (????? ???? ...).
- `TbUnitConversions` — ??????? ??? ???????.

### Location (Geo)
- `TbCountries` — ???.
- `TbStates` — ??????/????? ???? ?????.
- `TbCities` — ???.

### Vendor & Customer
- `TbVendors` — ?????? ????????.
- `TbCustomers` — ?????? ???????.

### Video Provider
- `TbVideoProviders` — ????? ??????? (YouTube, Vimeo ...).

### Support & Disputes
- `TbDisputes` — ?????? / ????? (disputes).
- `TbDisputeMessages` — ????? ?????? ?????????.
- `TbSupportTickets` — ????? ??? ???????.
- `TbSupportTicketMessages` — ????? ???? ????? ?????.

### Review Management
- `TbProductReviews` — ??????? ???????? ?? ???????.
- `TbSalesReviews` — ??????? ????? ????? (seller review).
- `TbDeliveryReviews` — ??????? ???????.
- `TbReviewVotes` — ??????? ??? ????????? (up/down votes).

### Warehouse / Inventory
- `TbWarehouses` — ?????/????????.
- `TbMoitems` — ????? ???? ????? (MO items).
- `TbMortem` — ????? ????? Mortem (??? ????? ???????? ????? ????? ?????? ?????).
- `TbMovitemsdetail` — ?????? ????? ???????.

### Loyalty System
- `TbLoyaltyTiers` — ??????? ?????? ?????? (tiers).
- `TbCustomerLoyalties` — ??? ??????? ?????? ?????? ????????? ??? ?????.
- `TbLoyaltyPointsTransactions` — ??? ??????? ???? ?????? (???/?????).

### Wallet System
- `TbCustomerWallets` — ????? ???????.
- `TbVendorWallets` — ????? ????????.
- `TbWalletTransactions` — ??????? ??????? (?????/???/?????).
- `TbPlatformTreasuries` — ????? ??????/????? ??????.

### Buy Box / Seller Performance
- `TbBuyBoxCalculations` — ?????? BuyBox.
- `TbBuyBoxHistories` — ????? ????? BuyBox.
- `TbSellerPerformanceMetrics` — ?????? ???? ????????.

### Seller Requests
- `TbSellerRequests` — ????? ???????? (??????? ??????? ...).
- `TbRequestComments` — ???????/??????? ??? ???????.
- `TbRequestDocuments` — ??????? ????? ??? ???.

### Campaign & Flash Sales
- `TbCampaigns` — ??????? ?????????.
- `TbCampaignProducts` — ?????? ?????? ??? ????.
- `TbCampaignVendors` — ?????? ??????? ?? ??????.
- `TbFlashSales` — ??????? ????? (Flash Sales).
- `TbFlashSaleProducts` — ?????? ???? ??????.

### Fulfillment (FBS/FBM)
- `TbFulfillmentMethods` — ??? ??????? (FBS, FBM ...).
- `TbFBMInventories` — ????? ???????? ?????? FBM.
- `TbFulfillmentFees` — ???? ???????.
- `TbFBMShipments` — ????? FBM ???????.

### Advanced Pricing
- `TbQuantityPricings` — ????? ????? ??? ??????.
- `TbCustomerSegmentPricings` — ????? ??? ????? ???????.
- `TbPriceHistories` — ????? ????????? ??? ?????.

### Homepage Merchandising
- `TbHomepageBlocks` — ??? ??? ??? ?????? ????????.
- `TbBlockProducts` — ?????? ???? ?? ????.

### Seller Tier Management
- `TbSellerTiers` — ??????? ???????? (Seller tiers).
- `TbSellerTierBenefits` — ?????/????? ?? ?????.
- `TbVendorTierHistories` — ??? ????? ????? ??????.

### Product Visibility
- `TbProductVisibilityRules` — ????? ?????/????? ??????.
- `TbSuppressionReasons` — ????? ?????/??????? (suppression reasons).
- `TbVisibilityLogs` — ??? ??????? ??????.

### Brand Management Advanced
- `TbBrandRegistrationRequests` — (????? ?????) ????? ????? ?????.
- `TbBrandDocuments` — (????? ?????) ??????? ???????.
- `TbAuthorizedDistributors` — (????? ?????) ?????? ??????.

### Offer / Warranty / Ratings
- `TbOffers` — ???? ???????.
- `TbOfferCombinationPricings` — ????? ??????? ?????.
- `TbOfferConditions` — ???? ????? ??????.
- `TbWarranties` — ????? ????????.
- `TbUserOfferRatings` — ??????? ?????????? ??????.

### Order Management
- `TbOrders` — ????? ??????.
- `TbOrderDetails` — ?????? ???? ?????.
- `TbRefundRequests` — ????? ???????/?????.
- `TbShippingDetails` — ?????? ????? ???????? ??????.

---

## Views (Keyless entities / database views)
- `VwAttributeWithOptions` — ??? ?????? ?????? ?? ????????.
- `VwCategoryItems` — ??? ?????/?????? ??? ????.
- `VwCategoryWithAttributes` — ??? ?????? ?? ???????.
- `VwItems` — ??? ????? ??? Items (?? view ?????).
- `VwUnitWithConversionsUnits` — ??? ????? ???????.
- `VwUserNotification` — ??? ??????? ???????? ???????.

---

??? ???? ??? Markdown ???? ????: ????? ?? ?????? (Properties) ??? ???? ????????? ??????? (FKs) ??? ????? ERD ???? ??? ?? ??????? ?????????? ?????? ?????? ???????? ?????? ????? `Domains.Entities.*`.
