# Home Page Blocks Feature - Visual Reference & Workflows

## Feature Navigation

```
Dashboard
??? Marketing Menu
    ??? Campaigns
    ??? Coupon Codes
    ??? ?? Home Page Blocks ? NEW FEATURE
        ??? List View (/home-blocks)
        ??? Create View (/home-blocks/new)
        ??? Edit View (/home-blocks/{id})
```

## Page Layouts

### List View (`/home-blocks`)
```
???????????????????????????????????????????????????????????
?  ?? Home Page Blocks                    [+ Add Block]   ?
???????????????????????????????????????????????????????????
?  [Search...] [Status ?] [Export ?] [Print]            ?
???????????????????????????????????????????????????????????
? # ? Title (EN/AR) ? Type   ? Layout  ? Order ? Status  ?
???????????????????????????????????????????????????????????
? 1 ? Featured Deal ? Campaign?Featured?  0  ? ?? Active?
? 2 ? Best Sellers  ? Dynamic ?Carousel?  1  ? ?? Active?
? 3 ? New Items     ? Dynamic ?Compact ?  2  ? ?? Sched ?
? 4 ? Your Picks    ? Personal?TwoRows ?  3  ? ?? Hidden?
?                                          [Edit] [Delete]?
???????????????????????????????????????????????????????????

Status Colors:
?? Green = Active (currently visible)
?? Yellow = Scheduled (future/past scheduled)
?? Red = Hidden (not visible)
```

### Create/Edit View (`/home-blocks/new` or `/home-blocks/{id}`)
```
??????????????????????????????????????????????????????????????
? ? Back to Blocks                         ? PREVIEW         ?
?                                          ? ????????????????
? CREATE HOME PAGE BLOCK                   ? Title (EN)      ?
???????????????????????????????????????????? Title (AR)      ?
?                                          ?                 ?
? Title (English) *                        ? Type: [Manual ?]?
? [...........................]            ? Layout: [Carou?]?
?                                          ? Order: 0        ?
? Title (Arabic) *                         ? Status: Hidden  ?
? [...........................]            ?                 ?
?                                          ? ? Visible       ?
? Subtitle (English)                       ?                 ?
? [...........................]            ? ? Configure &   ?
?                                          ? manage content  ?
? Subtitle (Arabic)                        ? using tabs      ?
? [...........................]            ?                 ?
?                                          ???????????????????
? Type *                    Layout *
? [Manual ?]               [Carousel ?]
?
? Display Order             ? Is Visible
? [0]                       ?
?
? ? Show "View All" Link
?
? [Create Block]  [Cancel]
????????????????????????????????????????????

Type Options:
??? Manual (select products manually)
??? Campaign (link to campaign)
??? Dynamic (best sellers, new arrivals, etc.)
??? Personalized (recommendations)

Layout Options:
??? Carousel (horizontal scroll)
??? TwoRows (2-row grid)
??? Featured (large cards)
??? Compact (small cards)
??? FullWidth (banner)
```

## Block Type Decision Tree

```
                    CREATE BLOCK
                        ?
                ?????????????????
                ?               ?
            Is it a           Is content
            Promotion?        changing?
            ? ?                ? ?
          YES NO             YES NO
          ?   ?              ?   ?
      [Campaign]         [Dynamic] [Manual]
          ?               ?       ?
       Select          Choose    Select
       Campaign         Source:  Products
                       • Best   Manually
                       • New
                       • Sale
                       • Rated
```

## Workflow Examples

### Create a Promotional Block
```
1. Click [+ Add Block]
2. Title (EN): "Summer Sale"
3. Title (AR): "??? ?????"
4. Type: [Campaign ?]
5. Campaign Dropdown: [Select Summer Sale]
6. Layout: [Carousel ?] (show multiple products)
7. Display Order: [0] (top of page)
8. ? Is Visible
9. ? Show "View All" Link
10. [Create Block]
```

### Create a Best Sellers Block
```
1. Click [+ Add Block]
2. Title (EN): "Best Sellers"
3. Title (AR): "?????? ??????"
4. Type: [Dynamic ?]
5. Dynamic Source: [Best Sellers ?]
6. Layout: [Compact ?] (show many items)
7. Display Order: [1]
8. ? Is Visible
9. ? Show "View All" Link
   Link Text (EN): [View All...]
   Link Text (AR): [??? ????...]
10. [Create Block]
```

### Create a Scheduled Block
```
1. Click [+ Add Block]
2. Title (EN): "New Year Sale"
3. Title (AR): "??? ??? ?????"
4. Type: [Campaign ?]
5. Select Campaign
6. Layout: [Featured ?]
7. Display Order: [0]
8. ? Is Visible
9. Visible From: [2024-01-01 00:00]
10. Visible To: [2024-01-31 23:59]
11. [Create Block]
    ? Status: "Scheduled" (before Jan 1)
    ? Status: "Active" (Jan 1-31)
    ? Status: "Hidden" (after Jan 31)
```

### Edit Block Order
```
1. Find block "Best Sellers" (currently Order: 1)
2. Click [Edit]
3. Display Order: [0] (move to top)
4. [Update Block]
5. Block now appears above previous top block
```

## User Actions & Results

```
???????????????????????????????????????????????????????????
? User Action                         ? Result            ?
???????????????????????????????????????????????????????????
? Create Block                        ? ? Success message ?
?                                     ? Redirect to list  ?
???????????????????????????????????????????????????????????
? Edit Block                          ? ? Success message ?
?                                     ? Redirect to list  ?
???????????????????????????????????????????????????????????
? Delete Block                        ? ? Confirmation    ?
?                                     ? ? Success message ?
???????????????????????????????????????????????????????????
? Search by title                     ? List filtered     ?
???????????????????????????????????????????????????????????
? Filter by status                    ? List filtered     ?
???????????????????????????????????????????????????????????
? Export to Excel                     ? .xlsx file        ?
???????????????????????????????????????????????????????????
? Print                               ? Print dialog      ?
???????????????????????????????????????????????????????????
```

## Data Flow Diagram

```
?????????????????????
?  Admin Dashboard  ?
?????????????????????
          ?
    ?????????????
    ? Razor Page?
    ? Component ?
    ?????????????
          ?
    ????????????????????????
    ? Dashboard Service    ?
    ? (IAdminBlockService) ?
    ????????????????????????
          ?
    ??????????????????
    ? HTTP Client    ?
    ? (IApiService)  ?
    ??????????????????
          ?
    ????????????????????????????
    ? REST API Controller      ?
    ? (AdminBlockController)   ?
    ????????????????????????????
          ?
    ??????????????????
    ? BL Service     ?
    ? (AdminBlock)   ?
    ??????????????????
          ?
    ??????????????????????
    ? Repository/DbContext
    ? (Database)         ?
    ??????????????????????
```

## Form Validation Flow

```
User fills form
        ?
        ?
Client-side validation
    ? Titles filled?
    ? Type selected?
    ? Layout selected?
    ?
    ?? Errors? Show messages
    ?
    ? All valid
Submit to API
        ?
        ?
Server-side validation
    ? Required fields?
    ? Campaign exists?
    ? Display order valid?
    ?
    ?? Errors? Return 400
    ?
    ? All valid
Save to database
        ?
        ?
Show success message
Redirect to list
```

## Status Lifecycle

```
Block Created
    ?
    ?? IsVisible = ?
    ?  ?? VisibleFrom = null, VisibleTo = null
    ?  ?  ? Status: ACTIVE (immediately visible)
    ?  ?
    ?  ?? VisibleFrom = future date
    ?  ?  ? Status: SCHEDULED (waiting)
    ?  ?     Auto? ACTIVE at VisibleFrom
    ?  ?
    ?  ?? VisibleFrom = past, VisibleTo = future
    ?     ? Status: ACTIVE (currently visible)
    ?        Auto? HIDDEN at VisibleTo
    ?
    ?? IsVisible = ?
       ? Status: HIDDEN (always)
```

## Feature Checklist

### Creating a Block
- [ ] Title (English) filled
- [ ] Title (Arabic) filled
- [ ] Block Type selected
- [ ] Layout selected
- [ ] Display Order set
- [ ] Visibility configured
- [ ] Optional fields (subtitles, links) added if needed
- [ ] Form validates without errors
- [ ] Submit succeeds
- [ ] Redirect to list occurs
- [ ] Block appears in list with correct status

### Editing a Block
- [ ] Find correct block in list
- [ ] Click edit button
- [ ] Modify desired fields
- [ ] Form validates
- [ ] Submit succeeds
- [ ] Return to list
- [ ] Changes visible in list

### Deleting a Block
- [ ] Find correct block in list
- [ ] Click delete button
- [ ] Confirm deletion dialog
- [ ] Block removed from list
- [ ] Success message shown

### Filtering & Search
- [ ] Search filters by title
- [ ] Status filter shows correct blocks
- [ ] Clear filters shows all blocks
- [ ] Results update immediately

## Component Dependencies

```
Pages/Marketing/HomeBlocks/
??? Index.razor (List view)
?   ??? Depends on: IAdminBlockService
?   ??? Depends on: BaseListPage<AdminBlockListDto>
?   ??? Depends on: SearchService
?   ??? Depends on: NotificationService
?
??? Details.razor (Create/Edit)
    ??? Depends on: IAdminBlockService
    ??? Depends on: ICampaignService
    ??? Depends on: INotificationService
    ??? Depends on: NavigationManager
```

## CSS Classes Used

```
Bootstrap Classes:
??? .container-fluid - Full-width container
??? .card - Card container
??? .btn, .btn-primary, .btn-secondary - Buttons
??? .form-control, .form-select - Form inputs
??? .badge - Status badges
??? .table - Data table
??? .alert - Alert boxes
??? .spinner-border - Loading spinner
??? .row, .col-* - Grid system
??? .text-* - Text utilities

Custom Classes:
??? .pcoded-navbar - Navigation menu
??? .nav-link - Navigation links
??? .dt-responsive - Responsive table
??? .custom-dropdown - Custom select styling
```

## API Response Examples

### Create Block Success
```json
{
  "success": true,
  "statusCode": 201,
  "message": "Block created successfully.",
  "data": {
    "id": "550e8400-e29b-41d4-a716-446655440000",
    "titleEn": "Featured Deal",
    "titleAr": "??? ????",
    "type": "Campaign",
    "layout": "Featured",
    "displayOrder": 0,
    "isVisible": true,
    "statusBadge": "Active"
  }
}
```

### Get All Blocks
```json
{
  "success": true,
  "statusCode": 200,
  "message": "Blocks retrieved successfully.",
  "data": [
    {
      "id": "550e8400-e29b-41d4-a716-446655440000",
      "titleEn": "Featured Deal",
      "titleAr": "??? ????",
      "type": "Campaign",
      "layout": "Featured",
      "displayOrder": 0,
      "isVisible": true,
      "createdDateUtc": "2024-01-15T10:30:00Z",
      "statusBadge": "Active"
    }
  ]
}
```

### Error Response
```json
{
  "success": false,
  "statusCode": 400,
  "message": "Invalid block data",
  "errors": [
    "Title (English) is required",
    "Title (Arabic) is required",
    "Block type must be specified"
  ]
}
```

---

This visual reference provides a complete overview of the Home Page Blocks Management feature interface and workflows.
